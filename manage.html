<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Management Portal - BookBuddy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        
        :root {
            --primary-dark: #333;
            --primary-green: #4CAF50;
            --primary-orange: #f56e14;
            --text-light: white;
            --text-dark: #333;
            --bg-light: #f9f9f9; 
            --card-bg: #ffffff;
            --border-color: #ddd;
            --card-shadow: rgba(0, 0, 0, 0.1);
            --offer-border: #f56e14;
            --offer-badge-bg: #ef5350;
            --aqua: aqua;
            --error-red: #d9534f;
            --secondary-gray: #ecf0f1;
        }

        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        a {
            text-decoration: none;
            color: inherit;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInFromLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideInFromRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }


      
         .home_head {
            background-color: var(--primary-dark);
            padding: 15px 0;
            width: 100%;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            animation: fadeIn 0.8s ease-out;
        }
        .home_header {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .home_heading h1 {
            color: var(--text-light);
            font-size: 1.8em;
        }
        .home_heading .buddy {
            color: var(--primary-orange);
        }
        .home_nav {
            animation: slideInFromRight 0.7s ease-out;
        }
        .home_nav a {
            color: var(--text-light);
            margin-left: 25px;
            font-weight: 500;
            transition: color 0.3s ease, transform 0.2s ease;
        }
        .home_nav a:hover {
            color: var(--aqua);
            transform: translateY(-2px);
        }
        .home_nav .btn {
            background-color: var(--primary-orange);
            padding: 10px 20px; 
            border-radius: 5px;
            font-size: 1em;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        }
        .home_nav .btn:hover {
            transform: translateY(-3px); 
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .staff-management-container {
            max-width: 1200px; 
            margin: 40px auto;
            padding: 20px;
            background-color: var(--card-bg); 
            border-radius: 12px;
            box-shadow: 0 4px 15px var(--card-shadow);
            opacity: 0;
            animation: fadeIn 0.8s ease-out forwards 0.3s;
        }

        .page_title {
            text-align: center;
            margin-bottom: 40px;
            color: var(--primary-dark);
        }

        .page_title h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .page_title p {
            color: #666;
            font-size: 1.1em;
        }

        .management_tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--secondary-gray);
        }

        .tab-btn {
            padding: 12px 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            border: 2px solid var(--primary-orange);
            background-color: var(--card-bg);
            color: var(--primary-dark);
            border-radius: 5px 5px 0 0;
            transition: background 0.3s ease, border-color 0.3s ease;
        }

        .tab-btn.active {
            background-color: var(--primary-orange);
            color: var(--text-light);
            border-color: var(--primary-orange);
        }

        .tab-btn:hover:not(.active) {
            background-color: #fff5f0;
        }

        .tab_content {
            display: none;
        }

        .tab_content.active {
            display: block;
        }

        .hotel_management {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .hotel_card {
            background-color: var(--secondary-gray);
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .hotel_card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .hotel_name {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 15px;
        }

        .price_section {
            margin-bottom: 15px;
        }

        .price_section label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--primary-dark);
        }
        
        .price_input {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .price_input:focus {
            outline: none;
            border-color: var(--primary-orange);
        }
        
        .update_btn {
            background-color: var(--primary-orange);
            color: var(--text-light);
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            width: 100%;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        }

        .update_btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .food_management {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
        }

        .food_category {
            background-color: var(--secondary-gray);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 14px rgba(0,0,0,0.08);
            border: 1px solid #e9ecef;
        }

        .category_title {
            font-size: 1.15em;
            font-weight: 700;
            color: var(--primary-green);
            margin-bottom: 16px;
            text-align: center;
            padding: 8px 0;
            border-bottom: 3px solid var(--primary-orange);
            letter-spacing: 0.2px;
        }

        .food_item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            padding: 12px 14px;
            border: 1px solid #eaeaea;
            border-radius: 10px;
            background-color: #ffffff;
            margin-bottom: 12px;
        }
        
        .food_item:last-child {
            border-bottom: none;
        }
        
        .food_name {
            font-weight: 700;
            color: var(--primary-dark);
            flex: 1;
            display: flex;
            align-items: center;
            gap: 8px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 999px;
            font-size: 0.75em;
            font-weight: 700;
            border: 1px solid transparent;
            white-space: nowrap;
        }
        .badge-veg { background:#e8f5e9; color:#2e7d32; border-color:#a5d6a7; }
        .badge-nonveg { background:#ffebee; color:#c62828; border-color:#ef9a9a; }
        .badge-breakfast { background:#fff8e1; color:#e65100; border-color:#ffe082; }
        .badge-lunch { background:#e3f2fd; color:#1565c0; border-color:#90caf9; }
        .badge-dinner { background:#f3e5f5; color:#6a1b9a; border-color:#ce93d8; }
        .badge-beverages { background:#e0f7fa; color:#006064; border-color:#80deea; }

        .food_price_input {
            width: 110px;
            padding: 8px 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            text-align: right;
            background: #fff;
            font-weight: 600;
            color: var(--primary-orange);
        }

        .update_food_btn {
            background-color: var(--primary-orange);
            color: var(--text-light);
            border: none;
            padding: 8px 14px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 700;
            margin-left: 8px;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        }

        .update_food_btn:hover {
            background-color: #e0600d;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
        }

        .staff_management {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
            }
            
        .staff_card {
            background-color: var(--secondary-gray);
            border-radius: 10px;
                padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .staff_card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .staff_name {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 10px;
        }

        .staff_role {
            color: #666;
            margin-bottom: 15px;
        }

        .task_assign {
            margin-bottom: 15px;
        }

        .task_assign label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--primary-dark);
        }

        .task_assign textarea {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            font-size: 1em;
            resize: vertical;
            min-height: 80px;
        }

        .assign_btn {
            background-color: var(--primary-orange);
            color: var(--text-light);
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            width: 100%;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        }

        .assign_btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .analytics_grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .analytics_card {
            background-color: var(--secondary-gray);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .analytics_card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .analytics_number {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary-orange);
            margin-bottom: 10px;
        }

        .analytics_label {
            color: #666;
            font-size: 1em;
        }

        footer {
            background-color: var(--primary-dark);
            color: var(--text-light);
            padding: 15px 0;
            text-align: center;
            margin-top: auto;
        }
        footer a {
            color: var(--primary-orange);
            margin: 0 5px;
        }
        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 992px) {
            .staff-management-container {
                margin: 20px;
                padding: 15px;
            }
            .management_tabs {
                flex-direction: column;
            }
            .tab-btn {
                border-radius: 5px;
            }
        }

        @media (max-width: 600px) {
            .hotel_management,
            .food_management,
            .staff_management {
                grid-template-columns: 1fr;
            }
            .food_item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
        
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 15px 20px;
  border-radius: 5px;
  color: white;
  z-index: 10000;
  animation: slideIn 0.3s ease-out;
}

.notification.success { background-color: #4CAF50; }
.notification.error { background-color: #f44336; }
.notification.info { background-color: #2196F3; }

@keyframes slideIn {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

.modal {
  display: block;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.4);
}

.modal-content {
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  max-width: 500px;
  border-radius: 10px;
}

.modal-content h2 {
  color: var(--primary-orange);
  margin-bottom: 12px;
}
.modal-content form label {
  display: block;
  margin: 10px 0 6px;
  font-weight: 600;
  color: var(--primary-dark);
}
.modal-content form input[type="number"] {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  outline: none;
}
.modal-content form input[type="number"]:focus {
  border-color: var(--primary-orange);
  box-shadow: 0 0 0 3px rgba(245, 110, 20, 0.15);
}
.modal-content form button[type="submit"] {
  margin-top: 12px;
  background-color: var(--primary-green);
  color: var(--text-light);
  border: none;
  padding: 10px 16px;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
}
.modal-content form button[type="submit"]:hover {
  background-color: #45a049;
}

.close {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
}

.close:hover { color: #000; }

.booking-card {
  border: 1px solid #ddd;
  padding: 15px;
  margin: 10px 0;
  border-radius: 5px;
  background-color: #f9f9f9;
}

.food_item {
  border: 1px solid #eee;
  padding: 10px;
  margin: 5px 0;
  border-radius: 5px;
}

.quantity-controls {
  display: inline-block;
  margin-left: 10px;
}

.quantity-controls button {
  width: 30px;
  height: 30px;
  border: 1px solid #ddd;
  background-color: #f5f5f5;
  cursor: pointer;
}

.quantity-controls span {
  display: inline-block;
  width: 30px;
  text-align: center;
  margin: 0 5px;
}
    </style>
</head>
<body>
    <header class="home_head">
        <div class="home_header">
            <div class="home_heading">
                <h1>Book<span class="buddy">Buddy</span></h1>
            </div>
                <nav class="home_nav">
                <div class="home_links">
                    <a href="index.html">Home</a>
                    <a href="manage.html">Management</a>
                    <a href="#" class="btn" id="logoutBtn">Logout</a>
                </div>
                </nav>
        </div>
    </header>

    <main class="staff-management-container">
        <section class="page_title">
            <h1><i class="fas fa-chart-bar"></i> Management Portal</h1>
            <p>Manage your hotel operations, pricing, and staff assignments</p>
        </section>

        
        <div class="management_tabs">
            <button class="tab-btn active" data-tab="analytics">Analytics</button>
            <button class="tab-btn" data-tab="hotels">Hotel Pricing</button>
            <button class="tab-btn" data-tab="food">Food Menu</button>
            <button class="tab-btn" data-tab="staff">Staff Management</button>
                    </div>

        
        <div class="tab_content active" id="analytics">
            <div class="analytics_grid">
                <div class="analytics_card">
                    <div class="analytics_number" id="analytics-total-bookings">0</div>
                    <div class="analytics_label">Total Bookings</div>
                    </div>
                <div class="analytics_card">
                    <div class="analytics_number" id="analytics-revenue">₹0</div>
                    <div class="analytics_label">Revenue This Month</div>
                </div>
                <div class="analytics_card">
                    <div class="analytics_number" id="analytics-occupancy">0%</div>
                    <div class="analytics_label">Occupancy Rate</div>
                </div>
                <div class="analytics_card">
                    <div class="analytics_number" id="analytics-active-staff">0</div>
                    <div class="analytics_label">Active Staff</div>
                </div>
                <div class="analytics_card">
                    <div class="analytics_number">23</div>
                    <div class="analytics_label">Active Staff</div>
                </div>
                <div class="analytics_card">
                    <div class="analytics_number">45</div>
                    <div class="analytics_label">Pending Tasks</div>
                </div>
                </div>
            </div>

        
        <div class="tab_content" id="hotels">
            <div class="hotel_management" id="hotelManagement">
                
            </div>
            </div>

        
        <div class="tab_content" id="food">
            <div class="food_management">
                <div class="food_category">
                    <div class="category_title">Breakfast</div>
                    <div class="food_item">
                        <span class="food_name">Idli Sambar (2pcs) <span class="badge badge-breakfast">Breakfast</span><span class="badge badge-veg">Veg</span></span>
                        <input type="number" class="food_price_input" value="100" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('idli', this)">Update</button>
                    </div>
                    <div class="food_item">
                        <span class="food_name">Masala Dosa <span class="badge badge-breakfast">Breakfast</span><span class="badge badge-veg">Veg</span></span>
                        <input type="number" class="food_price_input" value="120" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('dosa', this)">Update</button>
                    </div>
                    <div class="food_item">
                        <span class="food_name">Bread Omelette (2 Eggs) <span class="badge badge-breakfast">Breakfast</span><span class="badge badge-nonveg">Non-Veg</span></span>
                        <input type="number" class="food_price_input" value="200" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('bread-omelette', this)">Update</button>
                    </div>
                    <div class="food_item">
                        <span class="food_name">Ven Pongal <span class="badge badge-breakfast">Breakfast</span><span class="badge badge-veg">Veg</span></span>
                        <input type="number" class="food_price_input" value="150" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('pongal', this)">Update</button>
                    </div>
            </div>
            
                <div class="food_category">
                    <div class="category_title">Lunch</div>
                    <div class="food_item">
                        <span class="food_name">Chicken Biryani <span class="badge badge-lunch">Lunch</span><span class="badge badge-nonveg">Non-Veg</span></span>
                        <input type="number" class="food_price_input" value="450" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('chicken-biryani', this)">Update</button>
                    </div>
                    <div class="food_item">
                        <span class="food_name">Mutton Biryani <span class="badge badge-lunch">Lunch</span><span class="badge badge-nonveg">Non-Veg</span></span>
                        <input type="number" class="food_price_input" value="500" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('mutton-biryani', this)">Update</button>
              </div>
                    <div class="food_item">
                        <span class="food_name">Paneer Tikka Masala <span class="badge badge-lunch">Lunch</span><span class="badge badge-veg">Veg</span></span>
                        <input type="number" class="food_price_input" value="380" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('paneer-tikka', this)">Update</button>
                            </div>
                    <div class="food_item">
                        <span class="food_name">Fish Curry <span class="badge badge-lunch">Lunch</span><span class="badge badge-nonveg">Non-Veg</span></span>
                        <input type="number" class="food_price_input" value="400" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('fish-curry', this)">Update</button>
                            </div>
                    </div>

                <div class="food_category">
                    <div class="category_title">Dinner</div>
                    <div class="food_item">
                        <span class="food_name">Butter Chicken <span class="badge badge-dinner">Dinner</span><span class="badge badge-nonveg">Non-Veg</span></span>
                        <input type="number" class="food_price_input" value="550" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('butter-chicken', this)">Update</button>
                            </div>
                    <div class="food_item">
                        <span class="food_name">Mutton Curry <span class="badge badge-dinner">Dinner</span><span class="badge badge-nonveg">Non-Veg</span></span>
                        <input type="number" class="food_price_input" value="480" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('mutton-curry', this)">Update</button>
                            </div>
                    <div class="food_item">
                        <span class="food_name">Prawn Curry <span class="badge badge-dinner">Dinner</span><span class="badge badge-nonveg">Non-Veg</span></span>
                        <input type="number" class="food_price_input" value="520" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('prawn-curry', this)">Update</button>
                    </div>
                    <div class="food_item">
                        <span class="food_name">Royal Vegetarian Thali <span class="badge badge-dinner">Dinner</span><span class="badge badge-veg">Veg</span></span>
                        <input type="number" class="food_price_input" value="420" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('veg-thali', this)">Update</button>
                    </div>
                    </div>
                    
                <div class="food_category">
                    <div class="category_title">Beverages</div>
                    <div class="food_item">
                        <span class="food_name">Coffee <span class="badge badge-beverages">Beverages</span><span class="badge badge-veg">General</span></span>
                        <input type="number" class="food_price_input" value="80" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('coffee', this)">Update</button>
                            </div>
                    <div class="food_item">
                        <span class="food_name">Tea <span class="badge badge-beverages">Beverages</span><span class="badge badge-veg">General</span></span>
                        <input type="number" class="food_price_input" value="60" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('tea', this)">Update</button>
                            </div>
                    <div class="food_item">
                        <span class="food_name">Fresh Juice <span class="badge badge-beverages">Beverages</span><span class="badge badge-veg">General</span></span>
                        <input type="number" class="food_price_input" value="120" min="10" max="1000">
                        <button class="update_food_btn" onclick="updateFoodPrice('fresh-juice', this)">Update</button>
                            </div>
                            </div>
                            </div>
            <div id="food-items-container"></div>
            </div>
            </div>

        
        <div class="tab_content" id="staff">
            <div class="staff_management" id="staffList">
                
            </div>
        </div>
    </main>

    <footer>
        <div>
            &copy; 2025 BookBuddy. All rights reserved. | 
            <a href="#">Privacy Policy</a> | 
            <a href="#">Terms of Service</a>
        </div>
    </footer>

    <script src="js/database-manager.js"></script>
    <script src="js/api-client.js"></script>
    <script>
        
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
              
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab_content').forEach(c => c.classList.remove('active'));
                
                
                this.classList.add('active');
                
            
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
               
                if (tabId === 'food') {
                    try { loadManagerData(); } catch (_) {}
                }
            });
        });

        async function renderHotels() {
            const container = document.getElementById('hotelManagement');
            if (!container) return;
            try {
                const resp = await api.getHotels();
                const hotels = Array.isArray(resp) ? resp : (resp.data || []);
                if (!Array.isArray(hotels) || hotels.length === 0) {
                    container.innerHTML = '<div>No hotels found.</div>';
                    return;
                }
                container.innerHTML = hotels.map(h => `
                    <div class="hotel_card" data-hotel-id="${h.hotel_id}">
                        <div class="hotel_name">${h.name}</div>
                        <div class="price_section">
                            <label>Base price per night (₹)</label>
                            <input type="number" class="price_input" id="hotel-${h.hotel_id}-price" value="${h.base_price_per_night || 0}" min="0">
                        </div>
                        <button class="update_btn" onclick="updateHotelBasePrice(${h.hotel_id})">Update</button>
                    </div>
                `).join('');
            } catch (e) {
                console.error('Failed to load hotels', e);
                showNotification('Failed to load hotels', 'error');
            }
        }

        async function updateHotelBasePrice(hotelId) {
            try {
                const input = document.getElementById(`hotel-${hotelId}-price`);
                const val = parseInt(input.value, 10);
                if (isNaN(val) || val <= 0) { showNotification('Enter valid price', 'error'); return; }
                const fresh = await api.setHotelPriceAndRefresh(hotelId, val);
                const newVal = (fresh && fresh.data && fresh.data.base_price_per_night) || val;
                input.value = newVal;
                showNotification('Hotel price updated successfully', 'success');
            } catch (e) {
                showNotification(e.message || 'Update failed', 'error');
            }
        }

        
        const FOOD_KEY_HINTS = {
            'idli': ['idli'],
            'dosa': ['dosa'],
            'bread-omelette': ['omelette','bread'],
            'pongal': ['pongal'],
            'chicken-biryani': ['chicken biryani'],
            'mutton-biryani': ['mutton biryani'],
            'paneer-tikka': ['paneer tikka','paneer butter','paneer'],
            'fish-curry': ['fish curry'],
            'prawn-curry': ['prawn'],
            'veg-thali': ['veg thali','vegetarian thali'],
            'coffee': ['coffee'],
            'tea': ['tea'],
            'fresh-juice': ['juice']
        };
        function normName(s){ return String(s||'').toLowerCase().replace(/\s+/g,' ').trim(); }
        let foodIndexByName = null; 
        async function ensureFoodIndex(){
            if (foodIndexByName) return foodIndexByName;
            try{
                
                let resp = await api.getFoodItems();
                let items = Array.isArray(resp?.data) ? resp.data : (Array.isArray(resp) ? resp : []);
               
                if (!Array.isArray(items)) {
                    resp = await api.request('/food');
                    items = Array.isArray(resp?.data) ? resp.data : (Array.isArray(resp) ? resp : []);
                }
                const map = new Map();
                (items || []).forEach(it => { map.set(normName(it.name), { id: Number(it.food_item_id), name: String(it.name) }); });
                foodIndexByName = map;
                return map;
            } catch(e){
                console.warn('Failed to load food index', e);
                foodIndexByName = new Map();
                return foodIndexByName;
            }
        }
        async function resolveBackendFoodId(localKey){
            const map = await ensureFoodIndex();
            const hints = FOOD_KEY_HINTS[localKey] || [localKey];
           
            const all = Array.from(map.entries());
            for (const [n, obj] of all){
                for (const h of hints){ if (n.includes(normName(h))) return obj.id; }
            }
            return null;
        }

       
        async function updateFoodPrice(foodKey, button) {
            const priceInput = button.previousElementSibling;
            const newPriceStr = String(priceInput.value || '').trim();
            const newPriceNum = Number(newPriceStr);
            if (!newPriceStr || isNaN(newPriceNum) || newPriceNum <= 0) { showNotification('Enter valid price', 'error'); return; }
            try {
                
                const backendId = await resolveBackendFoodId(foodKey);
                if (!backendId) { showNotification('Item not found in backend', 'error'); return; }
                const fresh = await api.setFoodPriceAndRefresh(backendId, newPriceNum);
                
                try {
                    localStorage.setItem(foodKey + '_price', String(newPriceNum));
                    localStorage.setItem('priceUpdate', String(Date.now()));
                } catch {}

                const p = (fresh && fresh.data && fresh.data.price) || newPriceNum;
                priceInput.value = p;
                showNotification('Food price updated successfully', 'success');
            } catch (e) {
                console.error(e);
                showNotification(e.message || 'Failed to update food price', 'error');
            }
        }

        
        document.addEventListener('DOMContentLoaded', function initFoodInputs(){
            try {
                document.querySelectorAll('.update_food_btn').forEach(btn => {
                    const on = String(btn.getAttribute('onclick')||'');
                    const m = on.match(/updateFoodPrice\(['\"]([^'\"]+)['\"]/);
                    if (!m) return;
                    const key = m[1];
                    const val = localStorage.getItem(key + '_price');
                    if (val && btn.previousElementSibling && btn.previousElementSibling.classList.contains('food_price_input')) {
                        btn.previousElementSibling.value = val;
                    }
                });
            } catch {}
        });

        document.getElementById('logoutBtn').addEventListener('click', function(e){
            e.preventDefault();
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = 'login.html';
        });

        
        async function renderStaffFromAPI(){
            const staffListEl = document.getElementById('staffList');
            if (!staffListEl) return;
            try{
                const resp = await api.getManagerStaff();
                const staff = Array.isArray(resp?.data) ? resp.data : Array.isArray(resp) ? resp : [];
                if (!staff.length){
                    staffListEl.innerHTML = '<div>No staff found for your hotel.</div>';
                    return;
                }
                staffListEl.innerHTML = staff.map(s => `
                    <div class="staff_card" data-staff-email="${s.email}">
                        <div class="staff_name">${s.name || s.email}</div>
                        <div class="staff_role">${s.role || 'Staff'}</div>
                        <div class="task_assign">
                            <label>Assign New Task to ${s.email}:</label>
                            <div style="display:flex; gap:10px; align-items:center; margin:6px 0;">
                                <label for="sess-${s.email}" style="font-weight:600;">Session:</label>
                                <select id="sess-${s.email}" class="session-select">
                                    <option value="Morning">Morning</option>
                                    <option value="Afternoon">Afternoon</option>
                                    <option value="Night">Night</option>
                                </select>
                            </div>
                            <textarea placeholder="Enter task description..."></textarea>
                            <button class="assign_btn" onclick="assignTaskToEmail('${s.email}', this)">Assign Task</button>
                        </div>
                    </div>
                `).join('');
            }catch(e){
                console.error('Failed to load staff', e);
                staffListEl.innerHTML = '<div style="color:#d9534f">Failed to load staff for your hotel.</div>';
            }
        }

        async function assignTaskToEmail(staffEmail, btn){
            const textarea = btn.previousElementSibling;
            const description = (textarea.value || '').trim();
            const select = btn.parentElement.querySelector('.session-select');
            const session = (select && select.value) || 'Morning';
            if (!description){
                showNotification('Please enter a task description!', 'error');
                return;
            }
            
            try{
                if (session === 'Morning'){
                    const user = JSON.parse(localStorage.getItem('user')||'null');
                    const mgrKey = (user && user.email) ? user.email : 'unknown';
                    const today = new Date().toISOString().slice(0,10);
                    const capKey = `morning_assignments:${today}:${mgrKey}`;
                    const current = parseInt(localStorage.getItem(capKey)||'0',10) || 0;
                    if (current >= 3){
                        showNotification('Morning session limit reached (max 3). Assign to another session.', 'error');
                        return;
                    }
                }
            }catch{}
            try{
                const title = `Assigned Task (${session})`;
                await api.assignTask(staffEmail, title, description, null);
                textarea.value='';
             
                try{
                    if (session === 'Morning'){
                        const user = JSON.parse(localStorage.getItem('user')||'null');
                        const mgrKey = (user && user.email) ? user.email : 'unknown';
                        const today = new Date().toISOString().slice(0,10);
                        const capKey = `morning_assignments:${today}:${mgrKey}`;
                        const current = parseInt(localStorage.getItem(capKey)||'0',10) || 0;
                        localStorage.setItem(capKey, String(current+1));
                    }
                }catch{}
                showNotification('Task assigned', 'success');
            }catch(e){
                showNotification(e.message || 'Failed to assign task', 'error');
            }
        }

        
        document.addEventListener('DOMContentLoaded', function(){

            renderHotels();
           
            renderStaffFromAPI();
        });

        window.addEventListener('storage', (e) => {
            if (e.key === 'priceUpdate') {
                try { loadManagerData(); } catch (_) {}
            }
        });

      
        function getStaffName(staffId) {
            const staffNames = {
                'rajesh': 'Rajesh Kumar',
                'priya': 'Priya Sharma',
                'amit': 'Amit Patel',
                'suresh': 'Suresh Reddy',
                'meera': 'Meera Iyer',
                'kumar': 'Kumar Singh'
            };
            return staffNames[staffId] || 'Staff Member';
        }

        function showNotification(message, type) {
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: ${type === 'success' ? '#4CAF50' : '#f44336'};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideInFromRight 0.3s ease-out;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideInFromRight 0.3s ease-out reverse';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        function checkAuthentication() {
            
            const apiUser = JSON.parse(localStorage.getItem('user') || 'null');
            if (apiUser && apiUser.role === 'Manager') {
                return true;
            }

            const currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
            if (currentUser && (currentUser.type === 'manager' || currentUser.role === 'Manager')) {
                return true;
            }

            alert('Access denied. Please login as a manager.');
            window.location.href = 'login.html';
            return false;
        }

        function loadManagerHotel(user) {
            const hotelId = user.hotelId;
            if (!hotelId) {
                document.getElementById('hotelManagement').innerHTML = '<p>No hotel assigned to your account.</p>';
                return;
            }

            const hotelData = {
                'taj-coromandel': {
                    name: 'Taj Coromandel',
                    id: 'taj',
                    standard: 8500,
                    deluxe: 12000,
                    suite: 18000
                },
                'itc-hotel': {
                    name: 'ITC Grand Chola',
                    id: 'itc',
                    standard: 7200,
                    deluxe: 10000,
                    suite: 15000
                },
                'leela-palace': {
                    name: 'The Leela Palace',
                    id: 'leela',
                    standard: 9800,
                    deluxe: 14000,
                    suite: 20000
                },
                'radisson-blu': {
                    name: 'Radisson Blu',
                    id: 'radisson',
                    standard: 5500,
                    deluxe: 7500,
                    suite: 12000
                },
                'novotel': {
                    name: 'Novotel Chennai',
                    id: 'novotel',
                    standard: 4200,
                    deluxe: 6000,
                    suite: 9000
                },
                'sheraton': {
                    name: 'Sheraton Grand',
                    id: 'sheraton',
                    standard: 6800,
                    deluxe: 9500,
                    suite: 14000
                }
            };

            const hotel = hotelData[hotelId];
            if (hotel) {
                const hotelCard = `
                    <div class="hotel_card">
                        <div class="hotel_name">${hotel.name}</div>
                        <div class="price_section">
                            <label>Standard Room (per night)</label>
                            <input type="number" class="price_input" id="${hotel.id}-standard" value="${hotel.standard}" min="1000" max="50000">
                        </div>
                        <div class="price_section">
                            <label>Deluxe Room (per night)</label>
                            <input type="number" class="price_input" id="${hotel.id}-deluxe" value="${hotel.deluxe}" min="1000" max="50000">
                        </div>
                        <div class="price_section">
                            <label>Suite (per night)</label>
                            <input type="number" class="price_input" id="${hotel.id}-suite" value="${hotel.suite}" min="1000" max="50000">
                        </div>
                        <button class="update_btn" onclick="updateHotelPrices('${hotel.id}')">Update Prices</button>
                    </div>
                `;
                document.getElementById('hotelManagement').innerHTML = hotelCard;
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const user = checkAuthentication();
            if (user) {
                loadManagerHotel(user);
                loadSavedData();
            }
        });

    
        function loadSavedData() {
           
            ['taj', 'itc', 'leela', 'radisson'].forEach(hotelId => {
                const savedData = localStorage.getItem(hotelId + '_prices');
                if (savedData) {
                    const prices = JSON.parse(savedData);
                    const stdEl = document.getElementById(hotelId + '-standard');
                    const delEl = document.getElementById(hotelId + '-deluxe');
                    const suiteEl = document.getElementById(hotelId + '-suite');
                    if (stdEl) stdEl.value = prices.standard;
                    if (delEl) delEl.value = prices.deluxe;
                    if (suiteEl) suiteEl.value = prices.suite;
                }
            });
            
            const foodItems = ['idli', 'dosa', 'bread-omelette', 'pongal', 'chicken-biryani', 'mutton-biryani', 'paneer-tikka', 'fish-curry', 'butter-chicken', 'mutton-curry', 'prawn-curry', 'veg-thali', 'coffee', 'tea', 'fresh-juice'];
            foodItems.forEach(foodId => {
                const savedPrice = localStorage.getItem(foodId + '_price');
                if (savedPrice) {
                    const btn = document.querySelector(`[onclick*="${foodId}"]`);
                    const priceInput = btn && btn.previousElementSibling ? btn.previousElementSibling : null;
                    if (priceInput) priceInput.value = savedPrice;
                }
            });
        }

        function addNewFoodItem() {
            const category = document.getElementById('food-category').value;
            const name = document.getElementById('food-name').value;
            const price = document.getElementById('food-price').value;
            const description = document.getElementById('food-description').value;
            const image = document.getElementById('food-image').value;

            if (!category || !name || !price) {
                showNotification('Please fill in all required fields!', 'error');
                return;
            }

            const newFoodItem = {
                id: 'food_' + Date.now(),
                name: name,
                price: parseInt(price),
                image: image || 'default-food.jpg',
                description: description || 'Delicious food item',
                category: category,
                available: true
            };

            if (typeof dbManager !== 'undefined') {
                if (!dbManager.foodMenu[category]) {
                    dbManager.foodMenu[category] = [];
                }
                dbManager.foodMenu[category].push(newFoodItem);
                dbManager.saveData();
                showNotification(`New food item added to ${category} menu!`, 'success');
                
                // Clear form
                document.getElementById('food-name').value = '';
                document.getElementById('food-price').value = '';
                document.getElementById('food-description').value = '';
                document.getElementById('food-image').value = '';
            }
        }

        async function updateFoodPrice(_ignoredId, button) {
            const priceInput = button.previousElementSibling;
            const newPrice = parseFloat(priceInput.value);
            if (isNaN(newPrice) || newPrice <= 0) {
                showNotification('Please enter a valid price!', 'error');
                return;
            }
            try {
                const uiNameRaw = button.parentElement.querySelector('.food_name').textContent.trim();
                const norm = normalizeFoodName(uiNameRaw);
                let foodId = (window._foodIndex && window._foodIndex[norm]) || null;
                let items = [];
                if (!foodId) {
                    items = await fetchAllFoodItems();
                    
                    window._foodIndex = window._foodIndex || {};
                    for (const it of items) {
                        const key = normalizeFoodName(it.name || '');
                        if (key) window._foodIndex[key] = it.food_item_id;
                    }
                    foodId = window._foodIndex[norm] || null;
                }
                if (!foodId) {
                   
                    if (items.length === 0) {
                        items = await fetchAllFoodItems();
                    }
                    const found = items.find(it => {
                        const k = normalizeFoodName(it.name || '');
                        return k.includes(norm) || norm.includes(k);
                    });
                    if (found) foodId = found.food_item_id;
                }
                if (!foodId) {
                    showNotification('Food item not found in backend list!', 'error');
                    return;
                }
                const fresh = await api.setFoodPriceAndRefresh(foodId, newPrice);
                const updated = (fresh && fresh.data) || null;
                if (updated && updated.price) {
                    priceInput.value = updated.price;
                }
                
                try { localStorage.setItem('priceUpdate', String(Date.now())); } catch(_) {}
                try { await loadManagerData(); } catch(_) {}
                showNotification('Food price updated successfully', 'success');
            } catch (e) {
                console.error(e);
                showNotification(e.message || 'Failed to update food price', 'error');
            }
        }

        function sendBookingEmail(bookingData) {
            // Simulate email sending
            const emailContent = `
                Dear ${bookingData.guest.firstName} ${bookingData.guest.lastName},
                
                Thank you for your booking with Book Buddy!
                
                Booking Details:
                - Hotel: ${bookingData.hotel}
                - Check-in: ${bookingData.dates.checkIn}
                - Check-out: ${bookingData.dates.checkOut}
                - Room Type: ${bookingData.room.type}
                - Total Amount: ₹${bookingData.totalAmount}
                
                We look forward to welcoming you!
                
                Best regards,
                Book Buddy Team
            `;
            
            console.log('Email sent:', emailContent);
            showNotification('Booking confirmation email sent!', 'success');
        }

        function processPayment(amount) {
            
            const paymentMethods = [
                { name: 'Google Pay', icon: 'fab fa-google-pay' },
                { name: 'PhonePe', icon: 'fas fa-mobile-alt' },
                { name: 'Paytm', icon: 'fas fa-wallet' },
                { name: 'UPI', icon: 'fas fa-qrcode' },
                { name: 'Credit Card', icon: 'fas fa-credit-card' }
            ];
            
            const selectedMethod = paymentMethods[Math.floor(Math.random() * paymentMethods.length)];
            
            showNotification(`Redirecting to ${selectedMethod.name} for payment of ₹${amount}...`, 'success');
            
            
            setTimeout(() => {
                showNotification('Payment successful! Booking confirmed.', 'success');
            }, 2000);
        }
    </script>
    
    <script src="js/api-client.js"></script>
    <script src="js/booking-manager.js"></script>
    <script src="js/order-manager.js"></script>
    <script src="js/manager-tools.js"></script>
    
    
    <script>
        
        document.addEventListener('DOMContentLoaded', () => {
            if (!api.token) {
                window.location.href = 'login.html';
                return;
            }
           
            loadManagerData();
            
            loadAnalyticsKpis();
            loadManagerStaff();
        });
        
        function normalizeFoodName(name){
            return String(name || '')
                .replace(/\s*\(.*?\)\s*/g,'')
                .toLowerCase()
                .replace(/[^a-z0-9]+/g,' ')
                .replace(/\s+/g,' ')
                .trim();
        }

       
        async function fetchAllFoodItems() {
            const limit = 100;
            let page = 1;
            let all = [];
            while (true) {
                const resp = await api.getFoodItems({ page, limit });
                const items = Array.isArray(resp) ? resp : (resp.data || []);
                all = all.concat(items);
                const pages = (resp && resp.pages) || 1;
                if (page >= pages) break;
                page++;
            }
            return all;
        }

        async function loadManagerData() {
            try {
                const hotelsResp = await api.getHotels();
                const hotels = Array.isArray(hotelsResp) ? hotelsResp : (hotelsResp && hotelsResp.data ? hotelsResp.data : []);
                const allFoods = await fetchAllFoodItems();
                window._foodIndex = {};
                const items = Array.isArray(allFoods) ? allFoods : [];
                for (const it of items) {
                    const key = normalizeFoodName(it.name || '');
                    if (key) window._foodIndex[key] = it.food_item_id;
                }
                
                displayHotels(hotels);
                try {
                    const staticFoodGrid = document.querySelector('#food .food_management');
                    if (staticFoodGrid) staticFoodGrid.remove();
                } catch {}
               
                displayFoodItems(items);
                
            } catch (error) {
                console.error('Failed to load manager data:', error);
            }
        }
        
        async function loadAnalyticsKpis() {
            try {
                const resp = await api.getManagerAnalytics();
                const data = (resp && resp.data) ? resp.data : resp;
                const totalBookingsEl = document.getElementById('analytics-total-bookings');
                const revenueEl = document.getElementById('analytics-revenue');
                const occupancyEl = document.getElementById('analytics-occupancy');
                const activeStaffEl = document.getElementById('analytics-active-staff');
                if (totalBookingsEl) {
                    const tbm = (typeof data.total_bookings_this_month !== 'undefined') ? data.total_bookings_this_month : undefined;
                    const tbat = (typeof data.total_bookings_all_time !== 'undefined') ? data.total_bookings_all_time : undefined;
                    const legacy = (typeof data.total_bookings !== 'undefined') ? data.total_bookings : undefined;
                    const val = (tbm !== undefined ? tbm : (legacy !== undefined ? legacy : (tbat !== undefined ? tbat : 0)));
                    totalBookingsEl.textContent = String(val);
                }
                if (revenueEl && typeof data.revenue_this_month !== 'undefined') {
                    revenueEl.textContent = `₹${Number(data.revenue_this_month || 0).toLocaleString('en-IN')}`;
                }
                if (occupancyEl && typeof data.occupancy_rate !== 'undefined') {
                    occupancyEl.textContent = `${Number(data.occupancy_rate || 0)}%`;
                }
                try {
                    const staffResp = await api.getManagerStaff();
                    const staffList = Array.isArray(staffResp) ? staffResp : (staffResp && staffResp.data ? staffResp.data : []);
                    if (activeStaffEl) activeStaffEl.textContent = String(staffList.length || 0);
                } catch (_) {}
            } catch (e) {
                console.warn('Analytics KPIs load failed', e.message);
            }
        }
        
        async function loadManagerStaff() {
            try {
                await renderStaffFromAPI();
            } catch (e) {
                console.warn('Manager staff load failed', e.message);
            }
        }
        function displayHotels(hotels) {
            const container = document.getElementById('hotels-container');
            if (!container) return;
            
            container.innerHTML = hotels.map(hotel => `
                <div class="hotel-card">
                    <h3>${hotel.name}</h3>
                    <p>Location: ${hotel.location}</p>
                    <p>Current Price: ₹${hotel.base_price_per_night.toLocaleString()}</p>
                    <button onclick="managerTools.showPriceUpdateForm('hotel', ${hotel.hotel_id}, ${hotel.base_price_per_night})">
                        Update Price
                    </button>
                </div>
            `).join('');
        }
        
        function displayFoodItems(foodItems) {
            const container = document.getElementById('food-items-container');
            if (!container) return;
            
            container.innerHTML = (Array.isArray(foodItems) ? foodItems : []).map(item => `
                <div class="food-item-card">
                    <h4>${item.name}</h4>
                    <p>Price: ₹${item.price} - ${item.category} - ${item.type}</p>
                    <button onclick="managerTools.showPriceUpdateForm('food', ${item.food_item_id}, ${item.price})">
                        Update Price
                    </button>
                </div>
            `).join('');
        }
         
          function showAddFoodForm() {
            const formHTML = `
                <div id="add-food-modal" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                        <h2>Add New Food Item</h2>
                        <form onsubmit="handleAddFood(event)">
                            <input type="text" id="food-name" placeholder="Food Name" required>
                            <input type="number" id="food-price" placeholder="Price" required>
                            <select id="food-category" required>
                                <option value="">Select Category</option>
                                <option value="Breakfast">Breakfast</option>
                                <option value="Lunch">Lunch</option>
                                <option value="Dinner">Dinner</option>
                                <option value="Beverages">Beverages</option>
                            </select>
                            <select id="food-type" required>
                                <option value="">Select Type</option>
                                <option value="Veg">Veg</option>
                                <option value="Non-Veg">Non-Veg</option>
                                <option value="General">General</option>
                            </select>
                            <button type="submit">Add Food Item</button>
                        </form>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', formHTML);
        }
         
        async function handleAddFood(event) {
            event.preventDefault();
            
            const name = document.getElementById('food-name').value;
            const price = parseFloat(document.getElementById('food-price').value);
            const category = document.getElementById('food-category').value;
            const type = document.getElementById('food-type').value;
            
            try {
                await managerTools.addFoodItem(name, price, category, type);
                document.getElementById('add-food-modal').remove();
                loadManagerData(); 
            } catch (error) {
                console.error('Failed to add food item:', error);
            }
        }
    </script>
    
    
    <style>
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
        }
        .notification.success { background-color: #4CAF50; }
        .notification.error { background-color: #f44336; }
        .notification.info { background-color: #2196F3; }
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .modal {
            display: block;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover { color: #000; }
        .hotel-card, .food-item-card {
            border: 1px solid #e6e6e6;
            padding: 16px;
            margin: 8px 0;
            border-radius: 10px;
            background-color: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .food-item-card:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,0,0,0.08); }
        #food-items-container { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); 
            gap: 16px; 
            margin-top: 12px; 
        }
        .food-item-card h4 { margin-bottom: 8px; color: var(--primary-dark); }
        .food-item-card p { margin-bottom: 10px; color: #555; }
        .food-item-card button { 
            background-color: var(--primary-orange); 
            color: #fff; 
            border: none; 
            padding: 10px 14px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: 600; 
            transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease; 
        }
        .food-item-card button:hover { 
            background-color: #e0600d; 
            transform: translateY(-1px); 
            box-shadow: 0 6px 12px rgba(0,0,0,0.12); 
        }
    </style>
        
</body>
</html>