<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Menu - BookBuddy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
       
        :root {
            --primary-dark: #333; 
            --primary-green: #4CAF50;
            --primary-orange: #f56e14;
            --text-light: white;
            --text-dark: #333;
            --bg-light: #f9f9f9; 
            --card-bg: #ffffff;
            --border-color: #ddd;
            --card-shadow: rgba(0, 0, 0, 0.1);
            --offer-border: #f56e14;
            --offer-badge-bg: #ef5350;
            --aqua: aqua;
            --error-red: #d9534f;
            --secondary-gray: #ecf0f1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        a {
            text-decoration: none;
            color: inherit;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInFromLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideInFromRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .home_head {
            background-color: var(--primary-dark);
            padding: 15px 0;
            width: 100%;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            animation: fadeIn 0.8s ease-out;
        }
        .home_header {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .home_heading h1 {
            color: var(--text-light);
            font-size: 1.8em;
        }
        .home_heading .buddy {
            color: var(--primary-orange);
        }
        .home_nav {
            animation: slideInFromRight 0.7s ease-out;
        }
        .home_nav a {
            color: var(--text-light);
            margin-left: 25px;
            font-weight: 500;
            transition: color 0.3s ease, transform 0.2s ease;
        }
        .home_nav a:hover {
            color: var(--aqua);
            transform: translateY(-2px);
        }
        .home_nav .btn {
            background-color: var(--primary-orange);
            padding: 10px 20px; 
            border-radius: 5px;
            font-size: 1em;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        }
        .home_nav .btn:hover {
            transform: translateY(-3px); 
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .food_container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
            flex-grow: 1;
            display: flex;
            gap: 30px;
            align-items: flex-start;
            opacity: 0;
            animation: fadeIn 0.8s ease-out forwards 0.3s;
        }

        .menu_tabs {
            opacity: 0;
            animation: fadeIn 0.8s ease-out forwards 0.5s;
            flex: 2;
        }

        /* Image gallery for food items (added) */
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
            align-items: center;
        }

        .image-gallery img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
        }

        .image-gallery img:hover {
            transform: translateY(-6px) scale(1.03);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        /* Debug overlay for resolved images */
        .image-debug {
            font-size: 11px;
            color: #666;
            margin-top: 6px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .tab_buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            border: 2px solid var(--primary-orange);
            background-color: var(--card-bg);
            color: var(--primary-dark);
            border-radius: 5px;
            transition: background 0.3s ease, border-color 0.3s ease;
        }

        .tab-btn.active {
            background-color: var(--primary-orange);
            color: var(--text-light);
            border-color: var(--primary-orange);
        }

        .tab-btn:hover:not(.active) {
            background-color: #fff5f0;
        }

        .menu_content {
            display: none;
        }

        .menu_content.active {
            display: block;
        }

        .menu_item {
            opacity: 0;
            animation: fadeIn 0.8s ease-out forwards;
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px var(--card-shadow);
            transition: transform 0.3s ease;
        }

        .menu_item:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .menu_item_content {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .menu_item_image {
            width: 120px;
            height: 120px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .menu_item_image:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .menu_item_info {
            flex: 1;
        }

        .menu_item_name {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 8px;
        }

        .menu_item_description {
            color: #666;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .menu_item_price {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-orange);
            margin-bottom: 15px;
        }

        .menu_item_controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
            width: 100%;
            padding: 0 15px;
        }

        .quantity_input_group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }

        .quantity_input_group button {
            padding: 8px 15px;
            font-size: 1.2em;
            font-weight: bold;
            border: 1px solid var(--border-color);
            background-color: var(--secondary-gray);
            cursor: pointer;
            transition: background 0.2s;
            border-radius: 4px;
        }

        .quantity_input_group button:hover {
            background-color: #ddd;
        }

        .quantity-input {
            padding: 8px;
            font-size: 1.1em;
            width: 60px;
            text-align: center;
            border: 1px solid var(--border-color);
            border-radius: 4px;
        }

        .add_to_cart_btn {
            width: 100%;
            margin-top: 5px;
            padding: 10px;
            background-color: var(--primary-green);
            color: var(--text-light);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        }

        .add_to_cart_btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        
        .food_summary {
            opacity: 0;
            animation: fadeIn 0.8s ease-out forwards 1.0s;
            flex: 1;
            background-color: var(--secondary-gray);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px var(--card-shadow);
            position: sticky;
            top: 100px;
            height: fit-content;
        }

        .summary_title {
            color: var(--primary-dark);
            margin-bottom: 20px;
            font-size: 1.4em;
            text-align: center;
        }

        .cart_item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .cart_item:last-child {
            border-bottom: none;
        }

        .cart_item_name {
            font-weight: 600;
            color: var(--primary-dark);
        }

        .cart_item_quantity {
            color: #666;
            font-size: 0.9em;
        }

        .cart_item_price {
            font-weight: bold;
            color: var(--primary-orange);
        }

        .cart_total {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--primary-orange);
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-dark);
            display: flex;
            justify-content: space-between;
        }

        .confirm_food_btn {
            background-color: var(--primary-orange);
            color: var(--text-light);
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            width: 100%;
            margin-top: 20px;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        }

        .confirm_food_btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .empty_cart {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 20px;
        }

        .menu_item:nth-child(1) { animation-delay: 0.7s; }
        .menu_item:nth-child(2) { animation-delay: 0.8s; }
        .menu_item:nth-child(3) { animation-delay: 0.9s; }
        .menu_item:nth-child(4) { animation-delay: 1.0s; }
        .menu_item:nth-child(5) { animation-delay: 1.1s; }

       
        footer {
            background-color: var(--primary-dark);
            color: var(--text-light);
            padding: 15px 0;
            text-align: center;
            margin-top: auto;
        }
        footer a {
            color: var(--primary-orange);
            margin: 0 5px;
        }
        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 992px) {
            .food_container {
                flex-direction: column;
                gap: 20px;
            }
            .food_summary {
                position: static;
            }
            .menu_item_content {
                flex-direction: column;
                text-align: center;
            }
            .menu_item_image {
                width: 150px;
                height: 150px;
            }
        }

        @media (max-width: 600px) {
            .tab_buttons {
                flex-direction: column;
            }
            .menu_item_controls {
                flex-direction: column;
                align-items: stretch;
            }
        }
        
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 15px 20px;
  border-radius: 5px;
  color: white;
  z-index: 10000;
  animation: slideIn 0.3s ease-out;
}

.notification.success { background-color: #4CAF50; }
.notification.error { background-color: #f44336; }
.notification.info { background-color: #2196F3; }

@keyframes slideIn {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

.modal {
  display: block;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.4);
}

.modal-content {
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  max-width: 500px;
  border-radius: 10px;
}

.close {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
}

.close:hover { color: #000; }

.booking-card {
  border: 1px solid #ddd;
  padding: 15px;
  margin: 10px 0;
  border-radius: 5px;
  background-color: #f9f9f9;
}

.food-item {
  border: 1px solid #eee;
  padding: 10px;
  margin: 5px 0;
  border-radius: 5px;
}

.quantity-controls {
  display: inline-block;
  margin-left: 10px;
}

.quantity-controls button {
  width: 30px;
  height: 30px;
  border: 1px solid #ddd;
  background-color: #f5f5f5;
  cursor: pointer;
}

.quantity-controls span {
  display: inline-block;
  width: 30px;
  text-align: center;
  margin: 0 5px;
}

    </style>
</head>
<body>
    <header class="home_head">
        <div class="home_header">
            <div class="home_heading">
                <h1>Book<span class="buddy">Buddy</span></h1>
            </div>
            <nav class="home_nav">
                <div class="home_links">
                    <a href="index.html">Home</a>
                    <a href="home.html">Hotels</a>
                    <a href="#" class="btn">Login</a>
                </div>
            </nav>
        </div>
    </header>
    <script>
      
      (function(){
        async function refreshMenuPrices(){
          try {
            if (!window.api || !api.request) return;
            const LIMIT = 100;
            const first = await api.request(`/food?limit=${LIMIT}&page=1`);
            let items = Array.isArray(first?.data) ? first.data : (Array.isArray(first) ? first : []);
            const totalPages = Number(first?.pages || 1);
            for (let p=2; p<=totalPages; p++) {
              try {
                const pageResp = await api.request(`/food?limit=${LIMIT}&page=${p}`);
                const pageItems = Array.isArray(pageResp?.data) ? pageResp.data : (Array.isArray(pageResp) ? pageResp : []);
                if (pageItems && pageItems.length) items = items.concat(pageItems);
              } catch {}
            }
            if (!items.length) return;
            const norm = (s) => String(s||'').toLowerCase().replace(/\s+/g,' ').trim();
            const skinny = (s) => norm(s).replace(/[^a-z0-9]/g,'');
            const byName = new Map(items.map(f => [norm(f.name), Number(f.price||0)]));
            const bySkinny = new Map(items.map(f => [skinny(f.name), Number(f.price||0)]));
            document.querySelectorAll('.menu_item').forEach(mi => {
              const nameEl = mi.querySelector('.menu_item_name');
              const priceEl = mi.querySelector('.menu_item_price');
              if (!nameEl || !priceEl) return;
              const raw = String(nameEl.textContent||'');
              const nm = norm(raw);
              const ns = skinny(raw);
              let price = null;
              if (byName.has(nm)) price = byName.get(nm);
              else if (bySkinny.has(ns)) price = bySkinny.get(ns);
              else {
                for (const [k,v] of bySkinny.entries()) {
                  if (k.includes(ns) || ns.includes(k)) { price = v; break; }
                }
              }
              if (price != null) {
                priceEl.textContent = `₹${Number(price).toLocaleString('en-IN')}`;
              }
            });
          } catch (_) { /* ignore */ }
        }
       
        window.refreshMenuPrices = refreshMenuPrices;
      
        document.addEventListener('DOMContentLoaded', () => {
          refreshMenuPrices();
        });
        window.addEventListener('storage', (e) => {
          if (e.key === 'priceUpdate') {
            refreshMenuPrices();
          }
        });
      })();
    </script>

    <main class="food_container">
        
        <!-- top cart removed to keep single aside cart -->
        
        
        <section class="menu_tabs">
        

            <!-- Menu items list starts here -->

            
            <div class="menu_content active" id="breakfast">
                <div class="menu_item" data-item="idli">
                    <div class="menu_item_content">
                        <img src="images/idli.jpg" alt="Idli Sambar" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Idli Sambar (2pcs)</h3>
                            <p class="menu_item_description">Soft rice cakes with spicy lentil soup</p>
                            <div class="menu_item_price">₹100</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('idli', -1)">-</button>
                                    <input type="number" class="quantity-input" id="idli-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('idli', 1)">+</button>
                </div>
                                <button class="add_to_cart_btn" onclick="addToCart('idli', 'Idli Sambar (2pcs)', 100, 'images/idli.jpg')">
                                    Add to Cart
                    </button>
                </div>
            </div>
            </div>
        </div>
    
                <div class="menu_item" data-item="dosa">
                    <div class="menu_item_content">
                        <img src="images/dosa.webp" alt="Masala Dosa" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Masala Dosa</h3>
                            <p class="menu_item_description">Crispy crepe filled with spiced potatoes</p>
                            <div class="menu_item_price">₹120</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('dosa', -1)">-</button>
                                    <input type="number" class="quantity-input" id="dosa-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('dosa', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('dosa', 'Masala Dosa', 120, 'images/dosa.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                        </div>
                        </div>

                <div class="menu_item" data-item="bread-omelette">
                    <div class="menu_item_content">
                        <img src="images/omelete.webp" alt="Bread Omelette" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Bread Omelette (2 Eggs)</h3>
                            <p class="menu_item_description">Fluffy omelette with toasted bread</p>
                            <div class="menu_item_price">₹200</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('bread-omelette', -1)">-</button>
                                    <input type="number" class="quantity-input" id="bread-omelette-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('bread-omelette', 1)">+</button>
                    </div>
                                <button class="add_to_cart_btn" onclick="addToCart('bread-omelette', 'Bread Omelette (2 Eggs)', 200, 'images/bread omlete.webp')">
                                    Add to Cart
                                </button>
                        </div>
                        </div>
                    </div>
                        </div>

                <div class="menu_item" data-item="pongal">
                    <div class="menu_item_content">
                        <img src="images/vada.webp" alt="Ven Pongal" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Ven Pongal</h3>
                            <p class="menu_item_description">Traditional South Indian rice dish with ghee</p>
                            <div class="menu_item_price">₹150</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('pongal', -1)">-</button>
                                    <input type="number" class="quantity-input" id="pongal-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('pongal', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('pongal', 'Ven Pongal', 150, 'images/pongal.webp')">
                                    Add to Cart
                                </button>
                    </div>
                        </div>
                        </div>
                    </div>

                <div class="menu_item" data-item="vada">
                    <div class="menu_item_content">
                        <img src="images/vada.webp" alt="Medu Vada" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Medu Vada (2pcs)</h3>
                            <p class="menu_item_description">Crispy fried lentil donuts with sambar</p>
                            <div class="menu_item_price">₹80</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('vada', -1)">-</button>
                                    <input type="number" class="quantity-input" id="vada-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('vada', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('vada', 'Medu Vada (2pcs)', 80, 'images/vada.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                        </div>
                        </div>
                    </div>

            
            <div class="menu_content" id="lunch">
                <div class="menu_item" data-item="chicken-biryani">
                    <div class="menu_item_content">
                        <img src="images/chicken biriyani.webp" alt="Chicken Biryani" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Chicken Biryani</h3>
                            <p class="menu_item_description">Aromatic basmati rice with tender chicken</p>
                            <div class="menu_item_price">₹450</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('chicken-biryani', -1)">-</button>
                                    <input type="number" class="quantity-input" id="chicken-biryani-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('chicken-biryani', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('chicken-biryani', 'Chicken Biryani', 450, 'images/chicken biriyani.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                        </div>
                        </div>

                <div class="menu_item" data-item="mutton-biryani">
                    <div class="menu_item_content">
                        <img src="images/mutton biriyani.webp" alt="Mutton Biryani" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Mutton Biryani</h3>
                            <p class="menu_item_description">Fragrant rice with tender mutton</p>
                            <div class="menu_item_price">₹500</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('mutton-biryani', -1)">-</button>
                                    <input type="number" class="quantity-input" id="mutton-biryani-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('mutton-biryani', 1)">+</button>
                    </div>
                                <button class="add_to_cart_btn" onclick="addToCart('mutton-biryani', 'Mutton Biryani', 500, 'images/mutton biriyani.webp')">
                                    Add to Cart
                                </button>
                        </div>
                        </div>
                    </div>
                        </div>

                <div class="menu_item" data-item="paneer-tikka">
                    <div class="menu_item_content">
                        <img src="images/paneer tikka.webp" alt="Paneer Tikka Masala" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Paneer Tikka Masala</h3>
                            <p class="menu_item_description">Cottage cheese in creamy tomato sauce</p>
                            <div class="menu_item_price">₹380</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('paneer-tikka', -1)">-</button>
                                    <input type="number" class="quantity-input" id="paneer-tikka-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('paneer-tikka', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('paneer-tikka', 'Paneer Tikka Masala', 380, 'images/paneer tikka.webp')">
                                    Add to Cart
                                </button>
                    </div>
                        </div>
                    </div>
                </div>
        
                <div class="menu_item" data-item="fish-curry">
                    <div class="menu_item_content">
                        <img src="images/fish gravy.webp" alt="Fish Curry" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Fish Curry</h3>
                            <p class="menu_item_description">Spicy fish curry with rice</p>
                            <div class="menu_item_price">₹400</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('fish-curry', -1)">-</button>
                                    <input type="number" class="quantity-input" id="fish-curry-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('fish-curry', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('fish-curry', 'Fish Curry', 400, 'images/fish gravy.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                        </div>
                        </div>

                <div class="menu_item" data-item="veg-biryani">
                    <div class="menu_item_content">
                        <img src="images/veg biriyani.webp" alt="Vegetable Biryani" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Vegetable Biryani</h3>
                            <p class="menu_item_description">Aromatic rice with mixed vegetables</p>
                            <div class="menu_item_price">₹350</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('veg-biryani', -1)">-</button>
                                    <input type="number" class="quantity-input" id="veg-biryani-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('veg-biryani', 1)">+</button>
                    </div>
                                <button class="add_to_cart_btn" onclick="addToCart('veg-biryani', 'Vegetable Biryani', 350, 'images/veg biriyani.webp')">
                                    Add to Cart
                                </button>
                        </div>
                        </div>
                    </div>
                        </div>
                        </div>

            
            <div class="menu_content" id="dinner">
                <div class="menu_item" data-item="butter-chicken">
                    <div class="menu_item_content">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Butter Chicken</h3>
                            <p class="menu_item_description">Tender chicken in rich tomato and cream sauce</p>
                            <div class="menu_item_price">₹550</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('butter-chicken', -1)">-</button>
                                    <input type="number" class="quantity-input" id="butter-chicken-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('butter-chicken', 1)">+</button>
                    </div>
                                <button class="add_to_cart_btn" onclick="addToCart('butter-chicken', 'Butter Chicken', 550, 'chicken gravy\'.webp')">
                                    Add to Cart
                                </button>
                        </div>
                        </div>
                    </div>
                        </div>

                <div class="menu_item" data-item="mutton-curry">
                    <div class="menu_item_content">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Mutton Curry</h3>
                            <p class="menu_item_description">Spicy mutton curry with aromatic spices</p>
                            <div class="menu_item_price">₹480</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('mutton-curry', -1)">-</button>
                                    <input type="number" class="quantity-input" id="mutton-curry-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('mutton-curry', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('mutton-curry', 'Mutton Curry', 480, 'mutton gravy.webp')">
                                    Add to Cart
                                </button>
                    </div>
                        </div>
                        </div>
                    </div>

                <div class="menu_item" data-item="prawn-curry">
                    <div class="menu_item_content">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Prawn Curry</h3>
                            <p class="menu_item_description">Fresh prawns in coconut curry</p>
                            <div class="menu_item_price">₹520</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('prawn-curry', -1)">-</button>
                                    <input type="number" class="quantity-input" id="prawn-curry-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('prawn-curry', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('prawn-curry', 'Prawn Curry', 520, 'prawn gravy.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                </div>
            </div>

                <div class="menu_item" data-item="veg-thali">
                    <div class="menu_item_content">
                        <img src="mini lunch.webp" alt="Royal Vegetarian Thali" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Royal Vegetarian Thali</h3>
                            <p class="menu_item_description">Complete meal with multiple vegetarian dishes</p>
                            <div class="menu_item_price">₹420</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('veg-thali', -1)">-</button>
                                    <input type="number" class="quantity-input" id="veg-thali-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('veg-thali', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('veg-thali', 'Royal Vegetarian Thali', 420, 'mini lunch.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                        </div>
                        </div>
                    </div>

            
                        <div class="food-category" id="section-breakfast">
                            <h2>Breakfast</h2>
                            <div class="food-items" id="breakfast-list">
                                <!-- added items from user list -->
                                <div class="menu_item" data-item="idli-sambar">
                                    <div class="menu_item_content">
                                        <img src="idli.jpg" alt="Idli Sambar" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Idli Sambar</h3>
                                            <p class="menu_item_description">Soft steamed idlis served with sambar</p>
                                            <div class="menu_item_price">₹75</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('idli-sambar', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="idli-sambar-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('idli-sambar', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('idli-sambar', 'Idli Sambar', 75, 'idli.jpg')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="masala-dosa-2">
                                    <div class="menu_item_content">
                                        <img src="dosa.webp" alt="Masala Dosa" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Masala Dosa</h3>
                                            <p class="menu_item_description">Crispy dosa with spiced potato filling</p>
                                            <div class="menu_item_price">₹90</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('masala-dosa-2', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="masala-dosa-2-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('masala-dosa-2', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('masala-dosa-2', 'Masala Dosa', 90, 'dosa.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="pongal-vada">
                                    <div class="menu_item_content">
                                        <img src="pongal.webp" alt="Pongal Vada" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Pongal Vada</h3>
                                            <p class="menu_item_description">Ven pongal served with medu vada</p>
                                            <div class="menu_item_price">₹85</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('pongal-vada', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="pongal-vada-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('pongal-vada', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('pongal-vada', 'Pongal Vada', 85, 'pongal.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="omelette">
                                    <div class="menu_item_content">
                                        <img src="bread omlete.webp" alt="Omelette" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Omelette</h3>
                                            <p class="menu_item_description">Two-egg omelette</p>
                                            <div class="menu_item_price">₹75</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('omelette', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="omelette-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('omelette', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('omelette', 'Omelette', 75, 'bread omlete.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="poori-masala">
                                    <div class="menu_item_content">
                                        <img src="poori.jpg" alt="Poori Masala" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Poori Masala</h3>
                                            <p class="menu_item_description">Deep-fried poori served with potato masala</p>
                                            <div class="menu_item_price">₹95</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('poori-masala', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="poori-masala-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('poori-masala', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('poori-masala', 'Poori Masala', 95, 'poori.jpg')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="food-category" id="section-lunch">
                            <h2>Lunch</h2>
                            <div class="food-items" id="lunch-list">
                                <!-- lunch items from user list -->
                                <div class="menu_item" data-item="veg-thali-user">
                                    <div class="menu_item_content">
                                        <img src="images/mini lunch.webp" alt="Veg Thali" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Veg Thali</h3>
                                            <p class="menu_item_description">Assorted vegetarian dishes served as a thali</p>
                                            <div class="menu_item_price">₹180</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('veg-thali-user', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="veg-thali-user-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('veg-thali-user', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('veg-thali-user', 'Veg Thali', 180, 'mini lunch.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="chicken-biryani-user">
                                    <div class="menu_item_content">
                                        <img src="chicken biriyani.webp" alt="Chicken Biryani" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Chicken Biryani</h3>
                                            <p class="menu_item_description">Aromatic basmati rice with chicken</p>
                                            <div class="menu_item_price">₹220</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('chicken-biryani-user', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="chicken-biryani-user-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('chicken-biryani-user', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('chicken-biryani-user', 'Chicken Biryani', 220, 'chicken biriyani.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="mutton-biryani-user">
                                    <div class="menu_item_content">
                                        <img src="mutton biriyani.webp" alt="Mutton Biryani" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Mutton Biryani</h3>
                                            <p class="menu_item_description">Rich mutton biryani with spices</p>
                                            <div class="menu_item_price">₹280</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('mutton-biryani-user', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="mutton-biryani-user-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('mutton-biryani-user', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('mutton-biryani-user', 'Mutton Biryani', 280, 'mutton biriyani.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="paneer-butter-masala-user">
                                    <div class="menu_item_content">
                                        <img src="paneer tikka.webp" alt="Paneer Butter Masala" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Paneer Butter Masala</h3>
                                            <p class="menu_item_description">Creamy paneer curry</p>
                                            <div class="menu_item_price">₹210</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('paneer-butter-masala-user', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="paneer-butter-masala-user-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('paneer-butter-masala-user', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('paneer-butter-masala-user', 'Paneer Butter Masala', 210, 'paneer tikka.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="veg-fried-rice">
                                    <div class="menu_item_content">
                                        <img src="veg fried rice.webp" alt="Veg Fried Rice" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Veg Fried Rice</h3>
                                            <p class="menu_item_description">Stir-fried rice with vegetables</p>
                                            <div class="menu_item_price">₹160</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('veg-fried-rice', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="veg-fried-rice-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('veg-fried-rice', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('veg-fried-rice', 'Veg Fried Rice', 160, 'veg fried rice.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="chicken-fried-rice">
                                    <div class="menu_item_content">
                                        <img src="chicken fried rice.webp" alt="Chicken Fried Rice" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Chicken Fried Rice</h3>
                                            <p class="menu_item_description">Fried rice with chicken pieces</p>
                                            <div class="menu_item_price">₹190</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('chicken-fried-rice', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="chicken-fried-rice-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('chicken-fried-rice', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('chicken-fried-rice', 'Chicken Fried Rice', 190, 'chicken fried rice.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="food-category" id="section-dinner">
                            <h2>Dinner</h2>
                            <div class="food-items" id="dinner-list">
                                <!-- dinner items from user list -->
                                <div class="menu_item" data-item="tandoori-roti">
                                    <div class="menu_item_content">
                                        <img src="tandoori roti.webp" alt="Tandoori Roti" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Tandoori Roti</h3>
                                            <p class="menu_item_description">Freshly baked tandoori roti</p>
                                            <div class="menu_item_price">₹25</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('tandoori-roti', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="tandoori-roti-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('tandoori-roti', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('tandoori-roti', 'Tandoori Roti', 25, 'tandoori roti.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="butter-naan">
                                    <div class="menu_item_content">
                                        <img src="butter naan.webp" alt="Butter Naan" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Butter Naan</h3>
                                            <p class="menu_item_description">Soft naan with butter</p>
                                            <div class="menu_item_price">₹40</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('butter-naan', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="butter-naan-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('butter-naan', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('butter-naan', 'Butter Naan', 40, 'butter naan.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="dal-tadka-user">
                                    <div class="menu_item_content">
                                        <img src="dal tadka.webp" alt="Dal Tadka" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Dal Tadka</h3>
                                            <p class="menu_item_description">Slow-cooked dal tempered with spices</p>
                                            <div class="menu_item_price">₹160</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('dal-tadka-user', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="dal-tadka-user-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('dal-tadka-user', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('dal-tadka-user', 'Dal Tadka', 160, 'dal tadka.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="chicken-curry-user">
                                    <div class="menu_item_content">
                                        <img src="chicken curry.webp" alt="Chicken Curry" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Chicken Curry</h3>
                                            <p class="menu_item_description">Homestyle chicken curry</p>
                                            <div class="menu_item_price">₹230</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('chicken-curry-user', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="chicken-curry-user-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('chicken-curry-user', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('chicken-curry-user', 'Chicken Curry', 230, 'chicken curry.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="food-category" id="section-beverages">
                            <h2>Beverages</h2>
                            <div class="food-items" id="beverages-list">
                                <!-- beverages from user list -->
                                <div class="menu_item" data-item="masala-chai">
                                    <div class="menu_item_content">
                                        <img src="chai.webp" alt="Masala Chai" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Masala Chai</h3>
                                            <p class="menu_item_description">Spiced Indian tea</p>
                                            <div class="menu_item_price">₹40</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('masala-chai', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="masala-chai-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('masala-chai', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('masala-chai', 'Masala Chai', 40, 'chai.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="filter-coffee-user">
                                    <div class="menu_item_content">
                                        <img src="images/coffee.webp" alt="Filter Coffee" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Filter Coffee</h3>
                                            <p class="menu_item_description">South Indian filter coffee</p>
                                            <div class="menu_item_price">₹45</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('filter-coffee-user', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="filter-coffee-user-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('filter-coffee-user', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('filter-coffee-user', 'Filter Coffee', 45, 'coffee.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="fresh-lime-soda">
                                    <div class="menu_item_content">
                                        <img src="images/lemon soda.webp" alt="Fresh Lime Soda" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Fresh Lime Soda</h3>
                                            <p class="menu_item_description">Refreshing lime soda</p>
                                            <div class="menu_item_price">₹70</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('fresh-lime-soda', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="fresh-lime-soda-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('fresh-lime-soda', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('fresh-lime-soda', 'Fresh Lime Soda', 70, 'lemon soda.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="menu_item" data-item="bottled-water-1l">
                                    <div class="menu_item_content">
                                        <img src="water bottle.webp" alt="Bottled Water 1L" class="menu_item_image">
                                        <div class="menu_item_info">
                                            <h3 class="menu_item_name">Bottled Water 1L</h3>
                                            <p class="menu_item_description">Packaged mineral water (1 litre)</p>
                                            <div class="menu_item_price">₹30</div>
                                            <div class="menu_item_controls">
                                                <div class="quantity_input_group">
                                                    <button onclick="changeQuantity('bottled-water-1l', -1)">-</button>
                                                    <input type="number" class="quantity-input" id="bottled-water-1l-qty" value="0" min="0" max="10">
                                                    <button onclick="changeQuantity('bottled-water-1l', 1)">+</button>
                                                </div>
                                                <button class="add_to_cart_btn" onclick="addToCart('bottled-water-1l', 'Bottled Water 1L', 30, 'water bottle.webp')">Add to Cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

            <style>
              /* Hide tabs per user request */
              .food-tabs { display:none !important; }
            </style>

            
            <div class="menu_content" id="beverages">
                <div class="menu_item" data-item="coffee">
                    <div class="menu_item_content">
                        <img src="coffee.webp" alt="Coffee" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Coffee</h3>
                            <p class="menu_item_description">Freshly brewed coffee</p>
                            <div class="menu_item_price">₹80</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('coffee', -1)">-</button>
                                    <input type="number" class="quantity-input" id="coffee-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('coffee', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('coffee', 'Coffee', 80, 'coffee.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                        </div>
                        </div>

                <div class="menu_item" data-item="tea">
                    <div class="menu_item_content">
                        <img src="tea.webp" alt="Tea" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Tea</h3>
                            <p class="menu_item_description">Traditional Indian tea</p>
                            <div class="menu_item_price">₹60</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('tea', -1)">-</button>
                                    <input type="number" class="quantity-input" id="tea-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('tea', 1)">+</button>
                    </div>
                                <button class="add_to_cart_btn" onclick="addToCart('tea', 'Tea', 60, 'tea.webp')">
                                    Add to Cart
                                </button>
                        </div>
                        </div>
                    </div>
                        </div>

                <div class="menu_item" data-item="fresh-juice">
                    <div class="menu_item_content">
                        <img src="lemon soda.webp" alt="Fresh Juice" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Fresh Juice</h3>
                            <p class="menu_item_description">Seasonal fresh fruit juice</p>
                            <div class="menu_item_price">₹120</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('fresh-juice', -1)">-</button>
                                    <input type="number" class="quantity-input" id="fresh-juice-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('fresh-juice', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('fresh-juice', 'Fresh Juice', 120, 'lemon soda.webp')">
                                    Add to Cart
                                </button>
                    </div>
                        </div>
                        </div>
                    </div>

                <div class="menu_item" data-item="milk">
                    <div class="menu_item_content">
                        <img src="milk.webp" alt="Milk" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Fresh Milk</h3>
                            <p class="menu_item_description">Cold fresh milk</p>
                            <div class="menu_item_price">₹40</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('milk', -1)">-</button>
                                    <input type="number" class="quantity-input" id="milk-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('milk', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('milk', 'Fresh Milk', 40, 'milk.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                        </div>
                        </div>

                <div class="menu_item" data-item="buttermilk">
                    <div class="menu_item_content">
                        <img src="butter milk.webp" alt="Buttermilk" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Buttermilk</h3>
                            <p class="menu_item_description">Refreshing traditional buttermilk</p>
                            <div class="menu_item_price">₹30</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('buttermilk', -1)">-</button>
                                    <input type="number" class="quantity-input" id="buttermilk-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('buttermilk', 1)">+</button>
                    </div>
                                <button class="add_to_cart_btn" onclick="addToCart('buttermilk', 'Buttermilk', 30, 'butter milk.webp')">
                                    Add to Cart
                                </button>
                        </div>
                        </div>
                    </div>
                </div>

                <div class="menu_item" data-item="rose-milk">
                    <div class="menu_item_content">
                        <img src="rose milk.webp" alt="Rose Milk" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Rose Milk</h3>
                            <p class="menu_item_description">Sweet rose flavored milk</p>
                            <div class="menu_item_price">₹50</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('rose-milk', -1)">-</button>
                                    <input type="number" class="quantity-input" id="rose-milk-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('rose-milk', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('rose-milk', 'Rose Milk', 50, 'rose milk.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                        </div>
                        </div>
                    </div>

            
            <div class="menu_content" id="desserts">
                <div class="menu_item" data-item="kesari">
                    <div class="menu_item_content">
                        <img src="kesari.webp" alt="Kesari" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Kesari</h3>
                            <p class="menu_item_description">Traditional South Indian sweet dish</p>
                            <div class="menu_item_price">₹120</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('kesari', -1)">-</button>
                                    <input type="number" class="quantity-input" id="kesari-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('kesari', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('kesari', 'Kesari', 120, 'kesari.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                        </div>
                        </div>

                <div class="menu_item" data-item="payasam">
                    <div class="menu_item_content">
                        <img src="payasam.webp" alt="Payasam" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Payasam</h3>
                            <p class="menu_item_description">Traditional South Indian dessert</p>
                            <div class="menu_item_price">₹100</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('payasam', -1)">-</button>
                                    <input type="number" class="quantity-input" id="payasam-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('payasam', 1)">+</button>
                    </div>
                                <button class="add_to_cart_btn" onclick="addToCart('payasam', 'Payasam', 100, 'payasam.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                </div>
            </div>

                <div class="menu_item" data-item="ice-cream">
                    <div class="menu_item_content">
                        <img src="ice cream.webp" alt="Ice Cream" class="menu_item_image">
                        <div class="menu_item_info">
                            <h3 class="menu_item_name">Ice Cream</h3>
                            <p class="menu_item_description">Vanilla, Chocolate, Strawberry</p>
                            <div class="menu_item_price">₹80</div>
                            <div class="menu_item_controls">
                                <div class="quantity_input_group">
                                    <button onclick="changeQuantity('ice-cream', -1)">-</button>
                                    <input type="number" class="quantity-input" id="ice-cream-qty" value="0" min="0" max="10">
                                    <button onclick="changeQuantity('ice-cream', 1)">+</button>
                        </div>
                                <button class="add_to_cart_btn" onclick="addToCart('ice-cream', 'Ice Cream', 80, 'ice cream.webp')">
                                    Add to Cart
                                </button>
                        </div>
                    </div>
                        </div>
                        </div>
                    </div>
        </section>

        
        <aside class="food_summary">
            <h3 class="summary_title">Your Order</h3>
            <div id="cartItems">
                <div class="empty_cart">Your cart is empty</div>
            </div>
            <div class="cart_total">
                <span>Total:</span>
                <span id="cartTotal">₹0</span>
        </div>
            <button class="confirm_food_btn" onclick="confirmFoodOrder()">
                <i class="fas fa-check"></i> Confirm Food Order
            </button>
        </aside>
    </main>

    <footer>
        <div>
            &copy; 2025 BookBuddy. All rights reserved. | 
            <a href="#">Privacy Policy</a> | 
            <a href="#">Terms of Service</a>
        </div>
    </footer>

    <script src="js/database-manager.js"></script>
    <script>
        var legacyCart = [];
        var legacyTotal = 0;

       
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
               
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.menu_content').forEach(c => c.classList.remove('active'));
                
                this.classList.add('active');
                
             
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');

            });
        });

      
        function changeQuantity(itemId, change) {
            const input = document.getElementById(itemId + '-qty');
            let currentValue = parseInt(input.value);
            let newValue = currentValue + change;
            
            if (newValue >= 0 && newValue <= 10) {
                input.value = newValue;
            }
        }

        function clampQuantityInput(e) {
            let v = parseInt(e.target.value);
            if (!Number.isFinite(v) || v < 0) v = 0;
            if (v > 10) v = 10;
            e.target.value = v;
        }

        function getOverridePrice(key, fallback) {
            const v = localStorage.getItem(key + '_price');
            const n = v ? parseFloat(v) : NaN;
            return Number.isFinite(n) ? n : fallback;
        }

        function addToCart(itemId, name, price, image) {
            const quantity = parseInt(document.getElementById(itemId + '-qty').value);
            
            if (quantity > 0) {
                
                const existingItem = cart.find(item => item.id === itemId);
                
                if (existingItem) {
                    existingItem.quantity += quantity;
                } else {
                    cart.push({
                        id: itemId,
                        name: name,
                        price: getOverridePrice(itemId, price),
                        quantity: quantity
                    });
                }
                
                updateCartDisplay();
                document.getElementById(itemId + '-qty').value = 0;
            }
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty_cart">Your cart is empty</div>';
                cartTotal.textContent = '₹0';
                return;
            }
            
            let html = '';
            total = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                html += `
                    <div class="cart_item">
                        <div>
                            <div class="cart_item_name">${item.name}</div>
                            <div class="cart_item_quantity">Qty: ${item.quantity}</div>
                        </div>
                        <div class="cart_item_price">₹${itemTotal.toLocaleString()}</div>
                        <button class="remove-btn" onclick="removeFromCartLocal('${item.id}')" title="Remove item">×</button>
                    </div>
                `;
            });
            
            cartItems.innerHTML = html;
            cartTotal.textContent = `₹${total.toLocaleString()}`;
        }

      
        function removeFromCartLocal(itemId){
            const idx = cart.findIndex(it => String(it.id) === String(itemId));
            if (idx > -1){
                cart.splice(idx, 1);
                updateCartDisplay();
            }
        }

        
        async function confirmFoodOrder() {
          if (cart.length === 0) {
            alert('Please add some items to your cart first!');
            return;
          }
         
          let enriched = cart.map(it => ({ ...it }));
          try {
            if (typeof api !== 'undefined' && api.request) {
              const res = await api.request('/food');
              const list = (res && res.data) ? res.data : [];
              for (const it of enriched) {
                if (!it.food_item_id && it.name) {
                  const match = list.find(f => (f.name||'').toLowerCase() === String(it.name||'').toLowerCase());
                  if (match) it.food_item_id = match.food_item_id;
                }
              }
            }
          } catch (_) { /* ignore mapping errors, room.html will re-resolve */ }

          localStorage.setItem('foodOrder', JSON.stringify(enriched));

          window.location.href = 'room.html';
        }


        function clearCartForNewUser() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const lastUser = localStorage.getItem('lastLoggedInUser');
            
            if (currentUser && currentUser.id !== lastUser) {
         
                cart = [];
                localStorage.removeItem('foodOrder');
                localStorage.setItem('lastLoggedInUser', currentUser.id);
            } else if (!currentUser && lastUser) {
             
                cart = [];
                localStorage.removeItem('foodOrder');
                localStorage.removeItem('lastLoggedInUser');
            }
        }

     
        function setupPriceUpdateListener() {
            if (typeof dbManager !== 'undefined') {
                dbManager.addListener((event, data) => {
                    if (event === 'foodPriceUpdated' || event === 'dataUpdated') {
                        updateFoodPricesFromDatabase();
                        showPriceUpdateNotification();
                    }
                });
            }
        }

        function updateFoodPricesFromDatabase() {
            if (typeof dbManager !== 'undefined') {
                const categories = dbManager.getFoodCategories();
                categories.forEach(category => {
                    const items = dbManager.getFoodMenu(category);
                    items.forEach(item => {
                   
                        const priceElement = document.querySelector(`[data-food-id="${item.id}"] .menu_item_price`);
                        if (priceElement) {
                            priceElement.textContent = `₹${item.price}`;
                        }
                    });
                });
            }
        }

        function showPriceUpdateNotification() {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: #4CAF50;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideInFromRight 0.3s ease-out;
                max-width: 300px;
            `;
            notification.innerHTML = `
                <i class="fas fa-sync-alt"></i> Food prices updated! Check latest rates.
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideInFromRight 0.3s ease-out reverse';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        document.addEventListener('DOMContentLoaded', function() {
            clearCartForNewUser();
            setupPriceUpdateListener();
            updateFoodPricesFromDatabase();
        
            (async () => {
              try {
                if (typeof api !== 'undefined' && api.request) {
                  const resp = await api.request('/food');
                  const list = (resp && resp.data) ? resp.data : [];
                  if (Array.isArray(list) && list.length) {
                    document.querySelectorAll('.menu_item').forEach(mi => {
                      const key = mi.getAttribute('data-item');
                      const nameEl = mi.querySelector('.menu_item_name');
                      const priceEl = mi.querySelector('.menu_item_price');
                      const displayName = nameEl ? String(nameEl.textContent||'').trim() : '';
                      if (!displayName || !priceEl || !key) return;
                      const match = list.find(f => String(f.name||'').toLowerCase() === displayName.toLowerCase());
                      if (match && match.price != null) {
                        const p = Number(match.price);
                        if (Number.isFinite(p)) {
                          priceEl.textContent = `₹${p.toLocaleString()}`;
                      
                          localStorage.setItem(key + '_price', String(p));
                        }
                      }
                    });
                  }
                }
              } catch(_){}
            })();
       
            document.querySelectorAll('.menu_item').forEach(mi => {
                const key = mi.getAttribute('data-item');
                const el = mi.querySelector('.menu_item_price');
                if (key && el) {
                    const v = localStorage.getItem(key + '_price');
                    if (v && !isNaN(parseFloat(v))) {
                        el.textContent = `₹${parseFloat(v).toLocaleString()}`;
                    }
                }
            });
        
            document.querySelectorAll('.quantity-input').forEach(inp => {
              inp.addEventListener('change', clampQuantityInput);
              inp.addEventListener('input', clampQuantityInput);
            });
        
            const savedCart = localStorage.getItem('foodOrder');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartDisplay();
            }
        });
    </script>
    
    
    
    <script src="js/booking-manager.js"></script>
    <script src="js/order-manager.js"></script>
    <script src="js/manager-tools.js"></script>
    
    
    
    
    <style>
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
        }
        .notification.success { background-color: #4CAF50; }
        .notification.error { background-color: #f44336; }
        .notification.info { background-color: #2196F3; }
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .food-category {
            margin: 20px 0;
        }
        .food-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        .food-item {
            border: 1px solid #eee;
            padding: 15px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .cart-container {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 350px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 1000;
        }
        .cart-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 10px 0;
            padding: 8px;
            border: 1px solid #eee;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .cart-item-info {
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        .item-name {
            font-weight: bold;
            font-size: 14px;
        }
        .item-price {
            color: #666;
            font-size: 12px;
        }
        .quantity-controls {
            display: flex;
            align-items: center;
            margin: 0 10px;
        }
        .quantity-controls button {
            width: 25px;
            height: 25px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 3px;
            font-size: 14px;
        }
        .quantity-controls button:hover {
            background: #f0f0f0;
        }
        .quantity-controls span {
            margin: 0 8px;
            font-weight: bold;
            min-width: 20px;
            text-align: center;
        }
        .item-total {
            font-weight: bold;
            color: #2c3e50;
            margin-right: 10px;
        }
        .remove-btn {
            background: #e74c3c;
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
        }
        .remove-btn:hover {
            background: #c0392b;
        }
        .cart-total {
            font-weight: bold;
            margin: 15px 0;
            padding: 10px 0;
            border-top: 2px solid #ddd;
            text-align: center;
            font-size: 16px;
            color: #2c3e50;
        }
        .cart-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .clear-btn {
            background: #95a5a6;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            flex: 1;
        }
        .clear-btn:hover {
            background: #7f8c8d;
        }
        .checkout-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            flex: 1;
            font-weight: bold;
        }
        .checkout-btn:hover {
            background: #229954;
        }
    </style>
    <script src="js/api-client.js"></script>
    <script>
   
      const CART_KEY = 'foodOrder';
      let cart = [];

      function saveCart() {
        localStorage.setItem(CART_KEY, JSON.stringify(cart));
      }
      function loadCart() {
        try { cart = JSON.parse(localStorage.getItem(CART_KEY)) || []; }
        catch { cart = []; }
      }

      function changeQuantity(key, delta) {
        const input = document.getElementById(`${key}-qty`);
        const current = parseInt(input.value || '0', 10);
        const max = getMaxQtyForKey(key);
        const next = Math.max(0, Math.min(max, current + delta));
        input.value = next;
      }

      function addToCart(key, name, price, image) {
        const qtyInput = document.getElementById(`${key}-qty`);
        const qty = parseInt(qtyInput?.value || '0', 10);
        if (!qty || qty <= 0) {
          notify('Please select quantity before adding', 'error');
          return;
        }
        
        loadCart();
        const existing = cart.find(i => i.key === key);
        if (existing) {
            const sum = existing.quantity + qty;
            existing.quantity = Math.min(99, sum); // Set maximum quantity to 99
        } else {
            cart.push({ key, name, price, quantity: qty });
        }
        saveCart();
        renderCart();
        notify(`${name} added to cart`, 'success');

        try {
          const itemEl = document.querySelector(`.menu_item[data-item="${key}"]`);
          if (itemEl) {
            itemEl.style.opacity = '0.5';
            const btn = itemEl.querySelector('.add_to_cart_btn');
            if (btn) { btn.disabled = true; btn.textContent = 'Added'; }
          }
         
          if (qtyInput) qtyInput.value = '0';
        } catch {}
      }

      function removeFromCart(key) {
        loadCart();
        cart = cart.filter(i => i.key !== key);
        saveCart();
        renderCart();
      }

      function clearCart() {
        cart = [];
        saveCart();
        renderCart();
      }

      function cartTotal() {
        return cart.reduce((sum, i) => sum + i.price * i.quantity, 0);
      }

      function renderCart() {
        const container = document.getElementById('cart-container');
        loadCart();
        if (!container) return;
        if (cart.length === 0) {
          container.innerHTML = '<h3>Shopping Cart</h3><p>Your cart is empty</p>';
          return;
        }
        const itemsHtml = cart.map(i => `
          <div class="cart_item">
            <div>
              <div class="cart_item_name">${i.name}</div>
              <div class="cart_item_quantity">x${i.quantity}</div>
            </div>
            <div style="display:flex;align-items:center;gap:8px;">
              <span class="item-total">₹${(i.price * i.quantity).toLocaleString()}</span>
              <button class="remove-btn" title="Remove" onclick="removeFromCart('${i.key}')">×</button>
            </div>
          </div>
        `).join('');
        const actionLabel = bookingId ? 'Place Order' : 'Proceed to Booking';
        const actionHandler = bookingId ? 'submitOrder()' : 'proceedToBooking()';
        const totalHtml = `<div class="cart_total"><span>Total</span><span>₹${cartTotal().toLocaleString()}</span></div>
          <div class="cart-actions"><button class="clear-btn" onclick="clearCart()">Clear</button><button class="checkout-btn" onclick="${actionHandler}">${actionLabel}</button></div>`;
        container.innerHTML = `<h3>Your Order</h3>${itemsHtml}${totalHtml}`;
      }

   
      const keyToBackendName = {
        'idli': 'Idli Sambar (2pcs)',
        'dosa': 'Masala Dosa',
        'bread-omelette': 'Bread Omelette (2 Eggs)',
        'pongal': 'Pongal',
        'chicken-biryani': 'Chicken Biryani',
        'mutton-biryani': 'Mutton Biryani',
        'paneer-tikka': 'Paneer Tikka Masala',
        'fish-curry': 'Fish Curry',
        'veg-biryani': 'Veg Biryani',
        'butter-chicken': 'Butter Chicken',
        'mutton-curry': 'Mutton Curry'
      };
      let backendFoodIndex = {}; 
      let stockById = {}; 
      let hotelIdForOrder = null;
      let bookingId = null;

      function getQueryParam(name) {
        const m = location.search.match(new RegExp(`[?&]${name}=([^&]+)`));
        return m ? decodeURIComponent(m[1]) : '';
      }

      function getBackendIdForKey(key) {
        const name = keyToBackendName[key];
        if (!name) return null;
        return backendFoodIndex[name] || null;
      }

      
      function nameToKey(name){
        return String(name||'')
          .toLowerCase()
          .replace(/[^a-z0-9]+/g,'-')
          .replace(/^-+|-+$/g,'');
      }

      function svgThumb(it){
        const name = String(it.name||'Item');
        const cat = String(it.category||'Food');
        const bgByCat = { Breakfast: '#FFF3CD', Lunch: '#D1ECF1', Dinner: '#F8D7DA', Beverages: '#E2E3E5' };
        const fgByCat = { Breakfast: '#856404', Lunch: '#0C5460', Dinner: '#721C24', Beverages: '#383D41' };
        const bg = bgByCat[cat] || '#EEEEEE';
        const fg = fgByCat[cat] || '#555555';
        const label = name.length > 18 ? name.slice(0,16)+"…" : name;
        const svg = `<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns='http://www.w3.org/2000/svg' width='300' height='180'>
  <rect width='100%' height='100%' fill='${bg}'/>
  <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='${fg}' font-family='Arial, sans-serif' font-size='20'>${label}</text>
  <text x='50%' y='85%' dominant-baseline='middle' text-anchor='middle' fill='${fg}' font-family='Arial, sans-serif' font-size='12'>${cat}</text>
</svg>`;
        return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
      }

          function renderDynamicMenu(allItems){
            const containerIds = {
              'Breakfast': 'breakfast-list',
              'Lunch': 'lunch-list',
              'Dinner': 'dinner-list',
              'Beverages': 'beverages-list'
            };
            
            // Standardized image mapping
            const foodImages = {
              'idli': 'images/idli.jpg',
              'dosa': 'images/dosa.webp',
              'vada': 'images/vada.webp',
              'chicken': 'images/chicken gravy.webp',
              'fish': 'images/fish gravy.webp',
              'default': 'images/default-food.svg',
              'beverage': 'images/default-beverage.svg'
            };        // Local image mapping for food items with proper paths
        const localImageMap = {
          'masala-dosa': 'images/dosa.webp',
          'chicken-biryani': 'images/chicken-biryani.webp',
          'mutton-biryani': 'images/mutton-biryani.webp',
          'fish-curry': 'images/fish-gravy.webp',
          'chicken-gravy': 'images/chicken-gravy.webp',
          'bread-omelette': 'images/bread-omlete.webp',
          'idli-sambar': 'images/idli.jpg',
          'tea': 'images/tea.webp',
          'coffee': 'images/coffee.webp',
          'mini-lunch': 'images/mini-lunch.webp',
          'lemon-soda': 'images/lemon-soda.webp',
          'tandoori-roti': 'images/tandoori-roti.webp',
          'butter-naan': 'images/butter-naan.webp',
          'kesari': 'images/kesari.webp',
          'payasam': 'images/payasam.webp'
        };
      
        Object.values(containerIds).forEach(id => { const el = document.getElementById(id); if (el) el.innerHTML = ''; });
      
        const byCat = new Map();
        (allItems||[]).forEach(it => {
          const raw = (it && it.category != null) ? String(it.category) : 'Others';
          const cat = raw.trim();
          if (!byCat.has(cat)) byCat.set(cat, []);
          byCat.get(cat).push(it);
        });
      
        const orderCats = ['Breakfast','Lunch','Dinner','Beverages'];
        orderCats.forEach(catName => {
          const targetId = containerIds[catName];
          const target = document.getElementById(targetId);
          if (!target) return;
          const list = (byCat.get(catName) || []).filter(it => String(it.category||'').trim().toLowerCase() === catName.toLowerCase());
          const cards = list.map(it => {
            const key = nameToKey(it.name);
            keyToBackendName[key] = it.name;
            const price = Number(it.price||0);
            // Only include local images for a small set of items (Masala Dosa, Mutton Biryani, Chicken Biryani, Fish Curry)
            function getItemImage(item) {
                const name = item.name.toLowerCase();
                if (name.includes('idli')) return foodImages.idli;
                if (name.includes('dosa')) return foodImages.dosa;
                if (name.includes('vada')) return foodImages.vada;
                if (name.includes('chicken')) return foodImages.chicken;
                if (name.includes('fish')) return foodImages.fish;
                if (item.category.toLowerCase() === 'beverages') return foodImages.beverage;
                return foodImages.default;
            }
            const img = getItemImage(it);
            return `
              <div class="menu_item" data-item="${key}">
                <div class="menu_item_content">
                  <img src="${img}" alt="${it.name}" class="menu_item_image" onerror="handleImageError(this);">
                  <div class="menu_item_info"> 
                    <h3 class="menu_item_name">${it.name}</h3>
                    <p class="menu_item_description">${it.type ? it.type : ''}</p>
                    <div class="menu_item_price">₹${price.toLocaleString('en-IN')}</div>
                    <div class="menu_item_controls"> 
                      <div class="quantity_input_group"> 
                        <button onclick="changeQuantity('${key}', -1)">-</button> 
                        <input type="number" class="quantity-input" id="${key}-qty" value="0" min="0" max="10"> 
                        <button onclick="changeQuantity('${key}', 1)">+</button> 
                      </div> 
                      <button class="add_to_cart_btn" data-name="${it.name.replace(/"/g,'&quot;')}" data-price="${price}" data-img="${img}" onclick="addToCartFromBtn(this)">Add to Cart</button> 
                    </div> 
                  </div> 
                </div> 
              </div>`;
          }).join('');
          target.innerHTML = cards || '';
          
          target.querySelectorAll('.quantity-input').forEach(inp => {
            inp.addEventListener('change', clampQuantityInput);
            inp.addEventListener('input', clampQuantityInput);
          });
          
          const section = document.getElementById('section-' + catName.toLowerCase());
          if (section) section.style.display = (cards && cards.length) ? '' : 'none';
        });
      }

      function getMaxQtyForKey(key) {
        const id = getBackendIdForKey(key);
        if (!id) return 10;
        const info = stockById[id];
        if (!info || info.stock == null) return 10; 
        return Math.max(0, Number(info.stock));
      }


      function setItemStockUI(key) {
        const card = document.querySelector(`.menu_item[data-item="${key}"]`);
        if (!card) return;
        const btn = card.querySelector('.add_to_cart_btn');
        const qtyInput = card.querySelector('.quantity-input');
        let badge = card.querySelector('.stock-badge');
        
        // Always enable the button and input by default
        if (btn) btn.disabled = false;
        if (qtyInput) { 
            qtyInput.disabled = false; 
            qtyInput.max = String(99); 
        }
        
        // Remove any existing stock badge
        if (badge) {
            badge.remove();
        }
      }

      
      function addToCartFromBtn(btn){
        try {
          const card = btn.closest('.menu_item');
          const key = card ? card.getAttribute('data-item') : '';
          const name = btn.getAttribute('data-name') || '';
          const price = Number(btn.getAttribute('data-price') || 0);
          if (key) addToCart(key, name, price);
        } catch (e) { console.warn('addToCartFromBtn failed', e); }
      }

      // Default fallback image as base64 SVG
      const DEFAULT_FOOD_IMAGE = `data:image/svg+xml;base64,${btoa(`
        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200">
          <rect width="100%" height="100%" fill="#f0f0f0"/>
          <text x="50%" y="50%" fill="#666" font-family="Arial" font-size="14" text-anchor="middle">Image not available</text>
        </svg>
      `)}`;

      // Handle image loading errors
      function handleImageError(img) {
        img.onerror = null;
        img.src = DEFAULT_FOOD_IMAGE;
      }

      // Add global handler for all images
      document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('img').forEach(img => {
          img.onerror = () => handleImageError(img);
        });
      });

      async function loadInventory() {
        try {
          const first = await api.request('/food');
          let items = Array.isArray(first?.data) ? first.data : (Array.isArray(first) ? first : []);
          const pages = Number(first?.pages || 1);
          if (pages > 1) {
            for (let p = 2; p <= pages; p++) {
              const rp = await api.request(`/food?page=${p}`);
              const arr = Array.isArray(rp?.data) ? rp.data : (Array.isArray(rp) ? rp : []);
              if (Array.isArray(arr) && arr.length) items = items.concat(arr);
            }
          }
          if (!Array.isArray(items)) { console.warn('Food: unexpected response shape', first); items = []; }
          backendFoodIndex = {};
          items.forEach(it => { backendFoodIndex[String(it.name)] = Number(it.food_item_id); });
        
          renderDynamicMenu(items);
       
          if (bookingId) {
            const sum = await api.request(`/bookings/${encodeURIComponent(bookingId)}/summary`);
            const hid = sum?.booking?.hotel_id;
            if (hid) hotelIdForOrder = hid;
          }
        
          if (hotelIdForOrder) {
            const stockResp = await api.request(`/orders/stock?hotel_id=${encodeURIComponent(hotelIdForOrder)}`);
            const rows = Array.isArray(stockResp?.data) ? stockResp.data : [];
            stockById = {};
            rows.forEach(r => { stockById[Number(r.food_item_id)] = { stock: r.stock, price: r.price }; });
          }
     
          Object.keys(keyToBackendName).forEach(setItemStockUI);
          
          ['beverages','desserts'].forEach(id => { const el = document.getElementById(id); if (el) el.style.display = 'none'; });
          (function hideLegacyStaticCards(){
            const allowed = new Set(['breakfast-list','lunch-list','dinner-list','beverages-list']);
            document.querySelectorAll('.menu_item').forEach(mi => {
              let p = mi.parentElement; let ok = false;
              while (p){ if (p.id && allowed.has(p.id)) { ok = true; break; } p = p.parentElement; }
              if (!ok) mi.style.display = 'none';
            });
          })();
        } catch (e) {
          console.warn('Inventory load failed:', e.message);
        }
      }

      function proceedToBooking(){
        loadCart();
        if (!cart.length) { notify('Cart is empty', 'error'); return; }
        try { localStorage.setItem(CART_KEY, JSON.stringify(cart)); } catch {}
        notify('Proceeding to booking to reserve your room…', 'info');
        setTimeout(() => { window.location.href = 'room.html'; }, 600);
      }

      async function submitOrder() {
        loadCart();
        if (!cart.length) { notify('Cart is empty', 'error'); return; }
        if (!api.token) {
            notify('Please login to place an order', 'error');
            setTimeout(() => window.location.href = 'login.html', 1000);
            return;
        }
        const food_items = [];
        for (const i of cart) {
          const id = getBackendIdForKey(i.key);
          if (!id) { notify(`${i.name} not available`, 'error'); return; }
          const price = Number(i.price || 0);
          food_items.push({ food_item_id: id, quantity: i.quantity, price });
        }
        try {
          const resp = await api.request('/orders/create', {
            method: 'POST',
            body: JSON.stringify({ food_items })
          });
          notify('Order placed successfully', 'success');
          clearCart();
          
          // Redirect to order confirmation page
          setTimeout(() => { window.location.href = 'orders.html'; }, 600);
        } catch (e) {
          notify(e.message || 'Failed to place order', 'error');
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        bookingId = getQueryParam('booking_id');
        renderCart();
        loadInventory();
       
        try {
          const PH = "data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='100'%3E%3Crect fill='%23eeeeee' width='100%25' height='100%25'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23666' font-size='14'%3ENo Image%3C/text%3E%3C/svg%3E";
          document.querySelectorAll('img').forEach(img => {
            img.addEventListener('error', function onErr(){ this.onerror=null; this.src = PH; });
          });
        } catch {}
       
        ['breakfast','lunch','dinner','beverages','starters','main-course','desserts'].forEach(id => {
          const el = document.getElementById(id);
          if (el) el.style.display = 'none';
        });

      
        const confirmBtn = document.querySelector("button[onclick*='submitOrder']");
        if (!bookingId) {
    
          if (confirmBtn) { confirmBtn.disabled = true; confirmBtn.title = 'Book a room first to place the order'; }
          const banner = document.createElement('div');
          banner.style.cssText = 'margin:12px 0;padding:10px;border:1px solid #f5c2c7;background:#f8d7da;color:#842029;border-radius:6px;display:flex;justify-content:space-between;align-items:center;gap:10px;';
          banner.innerHTML = '<div>You must book a room first to place a food order.</div>';
          const goBtn = document.createElement('button');
          goBtn.textContent = 'Proceed to Booking';
          goBtn.style.cssText = 'background:#f56e14;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;';
          goBtn.addEventListener('click', () => {
            try { saveCart(); localStorage.setItem('pendingFoodAfterBooking','1'); } catch {}
            window.location.href = 'book.html';
          });
          banner.appendChild(goBtn);
       
          const anchor = document.querySelector('#breakfast-list') || document.body;
          anchor.parentElement?.insertBefore(banner, anchor);
        } else {
        
          const pending = localStorage.getItem('pendingFoodAfterBooking') === '1';
          if (pending) {
            
            setTimeout(() => { try { submitOrder(); } catch {} finally { localStorage.removeItem('pendingFoodAfterBooking'); } }, 800);
          }
        }
      });

      function checkout() {
       
        saveCart();
        window.location.href = 'room.html';
      }

      function notify(message, type='info') {
        const n = document.createElement('div');
        n.className = `notification ${type}`;
        n.textContent = message;
        document.body.appendChild(n);
        setTimeout(() => n.remove(), 2500);
      }

      document.addEventListener('DOMContentLoaded', renderCart);
    </script>    <script src="js/api-client.js"></script>
    <script>
       
        function normName(s){
            return String(s||'').replace(/\s*\(.*?\)\s*/g,'').toLowerCase().replace(/[^a-z0-9]+/g,' ').replace(/\s+/g,' ').trim();
        }

        async function refreshFoodPricesFromBackend(){
            try{
                const resp = await api.getFoodItems({ limit: 100 });
                const items = Array.isArray(resp?.data) ? resp.data : Array.isArray(resp) ? resp : [];
                const priceMap = new Map(items.map(it => [normName(it.name), Number(it.price)||0]));
          
                document.querySelectorAll('.menu_item').forEach(card => {
                    const nameEl = card.querySelector('.menu_item_name');
                    const priceEl = card.querySelector('.menu_item_price');
                    if (!nameEl || !priceEl) return;
                    const key = normName(nameEl.textContent);
                    const p = priceMap.get(key);
                    if (typeof p === 'number' && p > 0){
                        priceEl.textContent = '₹' + p.toLocaleString('en-IN');
                    }
                });
            }catch(e){ /* ignore */ }
        }

        
        function applyLocalPriceOverrides(){
            try{
                document.querySelectorAll('.menu_item').forEach(card => {
                    const dataKey = card.getAttribute('data-item');
                    const priceEl = card.querySelector('.menu_item_price');
                    if (!dataKey || !priceEl) return;
                    const v = localStorage.getItem(dataKey + '_price');
                    const num = Number(v);
                    if (v && !isNaN(num) && num > 0){
                        priceEl.textContent = '₹' + num.toLocaleString('en-IN');
                    }
                });
            }catch{}
        }

        document.addEventListener('DOMContentLoaded', function(){
           
            refreshFoodPricesFromBackend();
          
            applyLocalPriceOverrides();
        });

       
        window.addEventListener('storage', function(ev){
            if (ev.key === 'priceUpdate'){
                refreshFoodPricesFromBackend();
                applyLocalPriceOverrides();
            }
        });
    </script>
    <script src="js/api-client.js"></script>
<script>
(function(){
  function qs(sel){ return document.querySelector(sel); }
  function loadCart(){ try { return JSON.parse(localStorage.getItem('foodOrder')||'[]'); } catch { return []; } }
  function saveCart(cart){ localStorage.setItem('foodOrder', JSON.stringify(cart)); }
  function getQuery(name){ const m = new URLSearchParams(window.location.search); return m.get(name); }

  const bookingId = getQuery('booking_id');

  if (typeof window.changeQuantity !== 'function') {
    window.changeQuantity = function(key, delta){
      const inp = document.getElementById(key + '-qty');
      if (!inp) return;
      const next = Math.max(0, Math.min(99, parseInt(inp.value||'0',10) + delta));
      inp.value = next;
    };
  }

  if (typeof window.addToCart !== 'function') {
    window.addToCart = function(key, name, price){
      const inp = document.getElementById(key + '-qty');
      const qty = Math.max(0, parseInt((inp && inp.value) || '1',10));
      if (qty === 0) return;
      const cart = loadCart();
      const idx = cart.findIndex(i => i.key === key || i.name === name);
      if (idx >= 0) cart[idx].quantity += qty;
      else cart.push({ key, name, price: Number(price||0), quantity: qty });
      saveCart(cart);
      renderCart();
    };
  }

  function renderCart(){
    const cont = document.getElementById('cart-container');
    if (!cont) return;
    const cart = loadCart();
    if (!cart.length){ cont.innerHTML = '<h3>Shopping Cart</h3><p>Your cart is empty</p>'; return; }
    const total = cart.reduce((s,i)=> s + i.price*i.quantity, 0);
    cont.innerHTML = '<h3>Shopping Cart</h3>' + cart.map(i => (
      `<div class="cart_item"><div><div class="cart_item_name">${i.name}</div><div class="cart_item_quantity">x${i.quantity}</div></div><div class="cart_item_price">₹${(i.price*i.quantity).toLocaleString()}</div></div>`
    )).join('') + `<div class="cart_total"><span>Total</span><span>₹${total.toLocaleString()}</span></div>`;
    const btn = document.createElement('button');
    btn.className = 'confirm_food_btn';
    btn.textContent = 'Place Order';
    btn.onclick = placeOrder;
    cont.appendChild(btn);
  }

  async function placeOrder(){
    try{
      if (!api || !api.token){ alert('Please login to place order'); return; }
      const cart = loadCart();
      if (!cart.length){ alert('Cart is empty'); return; }

      const resp = await api.request('/food?limit=500');
      const list = resp && resp.data ? resp.data : [];
      const mapByName = new Map(list.map(fi => [String(fi.name).toLowerCase(), fi.food_item_id]));
      const payloadItems = [];
      for (const it of cart){
        const id = mapByName.get(String(it.name).toLowerCase());
        if (!id){ alert(`Item not found in backend: ${it.name}`); return; }
        payloadItems.push({ food_item_id: id, quantity: it.quantity });
      }

      const order = await api.request('/orders/create', {
        method: 'POST',
        body: JSON.stringify({ booking_id: Number(bookingId), food_items: payloadItems })
      });
      localStorage.removeItem('foodOrder');
      renderCart();
      alert('Order placed successfully');
    }catch(e){
      console.error(e);
      alert((e && e.message) || 'Failed to place order');
    }
  }

  document.addEventListener('DOMContentLoaded', function(){ renderCart(); });
})();
</script>
</body>
</html>